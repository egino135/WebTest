/*! glm-js built 2017-04-02 11:34:38-04:00 | (c) humbletim | http://humbletim.github.io/glm-js */
glm = (function glmjs_scope(g) { var GLMJS_PREFIX, $GLM_console_factory, $GLM_reset_logging;
/*

 --------------------------------------------------------------------------
 glm-js | (c) humbletim | http://humbletim.github.io/glm-js
 --------------------------------------------------------------------------

 The MIT License (MIT)

 Copyright (c) 2015-2016 humbletim

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in all
 copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 SOFTWARE.

 --------------------------------------------------------------------------
 tdl-fast | (c) Google Inc. | https://github.com/greggman/tdl
 --------------------------------------------------------------------------
 
 Copyright 2009, Google Inc.
 All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.
 Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following disclaimer
 in the documentation and/or other materials provided with the
 distribution.
 Neither the name of Google Inc. nor the names of its
 contributors may be used to endorse or promote products derived from
 this software without specific prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
tdl={};tdl.fast=tdl.fast||{};tdl.fast.temp0v3_=new Float32Array(3);tdl.fast.temp1v3_=new Float32Array(3);tdl.fast.temp2v3_=new Float32Array(3);tdl.fast.temp0v4_=new Float32Array(4);tdl.fast.temp1v4_=new Float32Array(4);tdl.fast.temp2v4_=new Float32Array(4);tdl.fast.temp0m4_=new Float32Array(16);tdl.fast.temp1m4_=new Float32Array(16);tdl.fast.temp2m4_=new Float32Array(16);tdl.fast.matrix4=tdl.fast.matrix4||{};tdl.fast.rowMajor=tdl.fast.rowMajor||{};tdl.fast.columnMajor=tdl.fast.columnMajor||{};
tdl.fast.addVector=function(a,b,c){for(var d=b.length,e=0;e<d;++e)a[e]=b[e]+c[e];return a};tdl.fast.subVector=function(a,b,c){for(var d=b.length,e=0;e<d;++e)a[e]=b[e]-c[e];return a};tdl.fast.lerpVector=function(a,b,c,d){for(var e=b.length,f=0;f<e;++f)a[f]=(1-d)*b[f]+d*c[f];return a};tdl.fast.divVectorScalar=function(a,b,c){for(var d=b.length,e=0;e<d;++e)a[e]=b[e]/c;return a};tdl.fast.cross=function(a,b,c){a[0]=b[1]*c[2]-b[2]*c[1];a[1]=b[2]*c[0]-b[0]*c[2];a[2]=b[0]*c[1]-b[1]*c[0];return a};
tdl.fast.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};tdl.fast.normalize=function(a,b){for(var c=0,d=b.length,e=0;e<d;++e)c+=b[e]*b[e];c=Math.sqrt(c);if(1E-5<c)for(e=0;e<d;++e)a[e]=b[e]/c;else for(e=0;e<d;++e)a[e]=0;return a};tdl.fast.negativeVector=function(a,b){for(var c=b.length,d=0;d<c;++d)a[d]=-b[d];return a};tdl.fast.negativeMatrix=function(a,b){for(var c=b.length,d=0;d<c;++d)a[d]=-b[d];return a};tdl.fast.copyVector=function(a,b){a.set(b);return a};
tdl.fast.copyMatrix=function(a,b){a.set(b);return a};tdl.fast.mulScalarVector=function(a,b,c){for(var d=c.length,e=0;e<d;++e)a[e]=b*c[e];return a};tdl.fast.mulVectorScalar=function(a,b,c){return tdl.fast.mulScalarVector(a,c,b)};tdl.fast.mulScalarMatrix=function(a,b,c){for(var d=c.length,e=0;e<d;++e)a[e]=b*c[e];return a};tdl.fast.mulMatrixScalar=function(a,b,c){return tdl.fast.mulScalarMatrix(a,c,b)};tdl.fast.mulVectorVector=function(a,b,c){for(var d=b.length,e=0;e<d;++e)a[e]=b[e]*c[e];return a};
tdl.fast.divVectorVector=function(a,b,c){for(var d=b.length,e=0;e<d;++e)a[e]=b[e]/c[e];return a};tdl.fast.rowMajor.mulVectorMatrix4=function(a,b,c){for(var d=0;4>d;++d)for(var e=a[d]=0;4>e;++e)a[d]+=b[e]*c[4*e+d];return a};tdl.fast.columnMajor.mulVectorMatrix4=function(a,b,c){for(var d=0;4>d;++d){a[d]=0;for(var e=4*d,f=0;4>f;++f)a[d]+=b[f]*c[e+f]}return a};tdl.fast.mulVectorMatrix4=null;
tdl.fast.rowMajor.mulMatrix4Vector=function(a,b,c){for(var d=0;4>d;++d){a[d]=0;for(var e=4*d,f=0;4>f;++f)a[d]+=b[e+f]*c[f]}return a};tdl.fast.columnMajor.mulMatrix4Vector=function(a,b,c){for(var d=0;4>d;++d)for(var e=a[d]=0;4>e;++e)a[d]+=c[e]*b[4*e+d];return a};tdl.fast.mulMatrix4Vector=null;
tdl.fast.rowMajor.mulMatrixMatrix3=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7];b=b[8];var l=c[0],m=c[1],q=c[2],r=c[3],n=c[4],s=c[5],t=c[6],u=c[7];c=c[8];a[0]=d*l+e*r+f*t;a[1]=d*m+e*n+f*u;a[2]=d*q+e*s+f*c;a[3]=g*l+h*r+i*t;a[4]=g*m+h*n+i*u;a[5]=g*q+h*s+i*c;a[6]=j*l+k*r+b*t;a[7]=j*m+k*n+b*u;a[8]=j*q+k*s+b*c;return a};
tdl.fast.columnMajor.mulMatrixMatrix3=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7];b=b[8];var l=c[0],m=c[1],q=c[2],r=c[3],n=c[4],s=c[5],t=c[6],u=c[7];c=c[8];a[0]=d*l+g*m+j*q;a[1]=e*l+h*m+k*q;a[2]=f*l+i*m+b*q;a[3]=d*r+g*n+j*s;a[4]=e*r+h*n+k*s;a[5]=f*r+i*n+b*s;a[6]=d*t+g*u+j*c;a[7]=e*t+h*u+k*c;a[8]=f*t+i*u+b*c;return a};tdl.fast.mulMatrixMatrix3=null;
tdl.fast.rowMajor.mulMatrixMatrix4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],q=b[10],r=b[11],n=b[12],s=b[13],t=b[14];b=b[15];var u=c[0],v=c[1],w=c[2],x=c[3],z=c[4],A=c[5],B=c[6],C=c[7],D=c[8],E=c[9],F=c[10],y=c[11],G=c[12],H=c[13],I=c[14];c=c[15];a[0]=d*u+e*z+f*D+g*G;a[1]=d*v+e*A+f*E+g*H;a[2]=d*w+e*B+f*F+g*I;a[3]=d*x+e*C+f*y+g*c;a[4]=h*u+i*z+j*D+k*G;a[5]=h*v+i*A+j*E+k*H;a[6]=h*w+i*B+j*F+k*I;a[7]=h*x+i*C+j*y+k*c;a[8]=l*u+m*z+q*D+r*G;a[9]=l*v+m*A+q*E+
r*H;a[10]=l*w+m*B+q*F+r*I;a[11]=l*x+m*C+q*y+r*c;a[12]=n*u+s*z+t*D+b*G;a[13]=n*v+s*A+t*E+b*H;a[14]=n*w+s*B+t*F+b*I;a[15]=n*x+s*C+t*y+b*c;return a};
tdl.fast.columnMajor.mulMatrixMatrix4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],q=b[10],r=b[11],n=b[12],s=b[13],t=b[14];b=b[15];var u=c[0],v=c[1],w=c[2],x=c[3],z=c[4],A=c[5],B=c[6],C=c[7],D=c[8],E=c[9],F=c[10],y=c[11],G=c[12],H=c[13],I=c[14];c=c[15];a[0]=d*u+h*v+l*w+n*x;a[1]=e*u+i*v+m*w+s*x;a[2]=f*u+j*v+q*w+t*x;a[3]=g*u+k*v+r*w+b*x;a[4]=d*z+h*A+l*B+n*C;a[5]=e*z+i*A+m*B+s*C;a[6]=f*z+j*A+q*B+t*C;a[7]=g*z+k*A+r*B+b*C;a[8]=d*D+h*E+l*F+n*y;a[9]=e*D+i*E+m*
F+s*y;a[10]=f*D+j*E+q*F+t*y;a[11]=g*D+k*E+r*F+b*y;a[12]=d*G+h*H+l*I+n*c;a[13]=e*G+i*H+m*I+s*c;a[14]=f*G+j*H+q*I+t*c;a[15]=g*G+k*H+r*I+b*c;return a};tdl.fast.mulMatrixMatrix4=null;tdl.fast.rowMajor.column4=function(a,b,c){for(var d=0;4>d;++d)a[d]=b[4*d+c];return a};tdl.fast.columnMajor.column4=function(a,b,c){c*=4;a[0]=b[c+0];a[1]=b[c+1];a[2]=b[c+2];a[3]=b[c+3];return a};tdl.fast.column4=null;tdl.fast.rowMajor.row4=function(a,b,c){c*=4;a[0]=b[c+0];a[1]=b[c+1];a[2]=b[c+2];a[3]=b[c+3];return a};
tdl.fast.columnMajor.row4=function(a,b,c){for(var d=0;4>d;++d)a[d]=b[4*d+c];return a};tdl.fast.row4=null;tdl.fast.identity4=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};
tdl.fast.transpose4=function(a,b){if(a===b){var c;c=b[1];b[1]=b[4];b[4]=c;c=b[2];b[2]=b[8];b[8]=c;c=b[3];b[3]=b[12];b[12]=c;c=b[6];b[6]=b[9];b[9]=c;c=b[7];b[7]=b[13];b[13]=c;c=b[11];b[11]=b[14];b[14]=c;return a}c=b[1];var d=b[2],e=b[3],f=b[4],g=b[5],h=b[6],i=b[7],j=b[8],k=b[9],l=b[10],m=b[11],q=b[12],r=b[13],n=b[14],s=b[15];a[0]=b[0];a[1]=f;a[2]=j;a[3]=q;a[4]=c;a[5]=g;a[6]=k;a[7]=r;a[8]=d;a[9]=h;a[10]=l;a[11]=n;a[12]=e;a[13]=i;a[14]=m;a[15]=s;return a};
tdl.fast.inverse4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],q=b[11],r=b[12],n=b[13],s=b[14],t=b[15],u=m*t,v=s*q,w=i*t,x=s*j,z=i*q,A=m*j,B=e*t,C=s*f,D=e*q,E=m*f,F=e*j,y=i*f,G=k*n,H=r*l,I=g*n,J=r*h,K=g*l,L=k*h,M=c*n,O=r*d,P=c*l,Q=k*d,R=c*h,S=g*d,T=u*h+x*l+z*n-(v*h+w*l+A*n),U=v*d+B*l+E*n-(u*d+C*l+D*n),n=w*d+C*h+F*n-(x*d+B*h+y*n),d=A*d+D*h+y*l-(z*d+E*h+F*l),h=1/(c*T+g*U+k*n+r*d);a[0]=h*T;a[1]=h*U;a[2]=h*n;a[3]=h*d;a[4]=h*(v*g+w*k+A*r-(u*g+x*k+z*r));
a[5]=h*(u*c+C*k+D*r-(v*c+B*k+E*r));a[6]=h*(x*c+B*g+y*r-(w*c+C*g+F*r));a[7]=h*(z*c+E*g+F*k-(A*c+D*g+y*k));a[8]=h*(G*j+J*q+K*t-(H*j+I*q+L*t));a[9]=h*(H*f+M*q+Q*t-(G*f+O*q+P*t));a[10]=h*(I*f+O*j+R*t-(J*f+M*j+S*t));a[11]=h*(L*f+P*j+S*q-(K*f+Q*j+R*q));a[12]=h*(I*m+L*s+H*i-(K*s+G*i+J*m));a[13]=h*(P*s+G*e+O*m-(M*m+Q*s+H*e));a[14]=h*(M*i+S*s+J*e-(R*s+I*e+O*i));a[15]=h*(R*m+K*e+Q*i-(P*i+S*m+L*e));return a};tdl.fast.matrix4.inverse=function(a,b){return tdl.fast.inverse4(a,b)};
tdl.fast.matrix4.mul=function(a,b,c){return tdl.fast.mulMatrixMatrix4(a,b,c)};tdl.fast.matrix4.copy=function(a,b){return tdl.fast.copyMatrix(a,b)};tdl.fast.matrix4.setTranslation=function(a,b){a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};tdl.fast.matrix4.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};tdl.fast.matrix4.identity=function(a){return tdl.fast.identity4(a)};tdl.fast.matrix4.getAxis=function(a,b,c){c*=4;a[0]=b[c+0];a[1]=b[c+1];a[2]=b[c+2];return a};
tdl.fast.matrix4.perspective=function(a,b,c,d,e){b=Math.tan(0.5*Math.PI-0.5*b);var f=1/(d-e);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(d+e)*f;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*d*e*f;a[15]=0;return a};tdl.fast.matrix4.ortho=function(a,b,c,d,e,f,g){a[0]=2/(c-b);a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2/(e-d);a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=-1/(g-f);a[11]=0;a[12]=(c+b)/(b-c);a[13]=(e+d)/(d-e);a[14]=-f/(f-g);a[15]=1;return a};
tdl.fast.matrix4.frustum=function(a,b,c,d,e,f,g){var h=c-b,i=e-d,j=f-g;a[0]=2*f/h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*f/i;a[6]=0;a[7]=0;a[8]=(b+c)/h;a[9]=(e+d)/i;a[10]=g/j;a[11]=-1;a[12]=0;a[13]=0;a[14]=f*g/j;a[15]=0;return a};
tdl.fast.matrix4.lookAt=function(a,b,c,d){var e=tdl.fast.temp0v3_,f=tdl.fast.temp1v3_,g=tdl.fast.temp2v3_;c=tdl.fast.normalize(e,tdl.fast.subVector(e,b,c));d=tdl.fast.normalize(f,tdl.fast.cross(f,d,c));g=tdl.fast.cross(g,c,d);a[0]=d[0];a[1]=g[0];a[2]=c[0];a[3]=0;a[4]=d[1];a[5]=g[1];a[6]=c[1];a[7]=0;a[8]=d[2];a[9]=g[2];a[10]=c[2];a[11]=0;a[12]=-tdl.fast.dot(d,b);a[13]=-tdl.fast.dot(g,b);a[14]=-tdl.fast.dot(c,b);a[15]=1;return a};
tdl.fast.matrix4.cameraLookAt=function(a,b,c,d){var e=tdl.fast.temp0v3_,f=tdl.fast.temp1v3_,g=tdl.fast.temp2v3_;c=tdl.fast.normalize(e,tdl.fast.subVector(e,b,c));d=tdl.fast.normalize(f,tdl.fast.cross(f,d,c));g=tdl.fast.cross(g,c,d);a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=0;a[4]=g[0];a[5]=g[1];a[6]=g[2];a[7]=0;a[8]=c[0];a[9]=c[1];a[10]=c[2];a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};
tdl.fast.matrix4.translation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};tdl.fast.matrix4.translate=function(a,b){var c=b[0],d=b[1],e=b[2],f=a[1],g=a[2],h=a[3],i=a[5],j=a[6],k=a[7],l=a[9],m=a[10],q=a[11],r=a[13],n=a[14],s=a[15];a[12]=a[0]*c+a[4]*d+a[8]*e+a[12];a[13]=f*c+i*d+l*e+r;a[14]=g*c+j*d+m*e+n;a[15]=h*c+k*d+q*e+s;return a};tdl.fast.matrix4.transpose=tdl.fast.transpose4;
tdl.fast.matrix4.rotationX=function(a,b){var c=Math.cos(b),d=Math.sin(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=d;a[7]=0;a[8]=0;a[9]=-d;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};tdl.fast.matrix4.rotateX=function(a,b){var c=a[4],d=a[5],e=a[6],f=a[7],g=a[8],h=a[9],i=a[10],j=a[11],k=Math.cos(b),l=Math.sin(b);a[4]=k*c+l*g;a[5]=k*d+l*h;a[6]=k*e+l*i;a[7]=k*f+l*j;a[8]=k*g-l*c;a[9]=k*h-l*d;a[10]=k*i-l*e;a[11]=k*j-l*f;return a};
tdl.fast.matrix4.rotationY=function(a,b){var c=Math.cos(b),d=Math.sin(b);a[0]=c;a[1]=0;a[2]=-d;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=d;a[9]=0;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};tdl.fast.matrix4.rotateY=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[8],h=a[9],i=a[10],j=a[11],k=Math.cos(b),l=Math.sin(b);a[0]=k*c-l*g;a[1]=k*d-l*h;a[2]=k*e-l*i;a[3]=k*f-l*j;a[8]=k*g+l*c;a[9]=k*h+l*d;a[10]=k*i+l*e;a[11]=k*j+l*f;return a};
tdl.fast.matrix4.rotationZ=function(a,b){var c=Math.cos(b),d=Math.sin(b);a[0]=c;a[1]=d;a[2]=0;a[3]=0;a[4]=-d;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};tdl.fast.matrix4.rotateZ=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=Math.cos(b),l=Math.sin(b);a[0]=k*c+l*g;a[1]=k*d+l*h;a[2]=k*e+l*i;a[3]=k*f+l*j;a[4]=k*g-l*c;a[5]=k*h-l*d;a[6]=k*i-l*e;a[7]=k*j-l*f;return a};
tdl.fast.matrix4.axisRotation=function(a,b,c){var d=b[0],e=b[1];b=b[2];var f=Math.sqrt(d*d+e*e+b*b),d=d/f,e=e/f;b/=f;var f=d*d,g=e*e,h=b*b,i=Math.cos(c);c=Math.sin(c);var j=1-i;a[0]=f+(1-f)*i;a[1]=d*e*j+b*c;a[2]=d*b*j-e*c;a[3]=0;a[4]=d*e*j-b*c;a[5]=g+(1-g)*i;a[6]=e*b*j+d*c;a[7]=0;a[8]=d*b*j+e*c;a[9]=e*b*j-d*c;a[10]=h+(1-h)*i;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};
tdl.fast.matrix4.axisRotate=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=Math.sqrt(d*d+e*e+f*f);d/=b;e/=b;f/=b;b=d*d;var g=e*e,h=f*f,i=Math.cos(c),j=Math.sin(c),k=1-i;c=b+(1-b)*i;b=d*e*k+f*j;var l=d*f*k-e*j,m=d*e*k-f*j,g=g+(1-g)*i,q=e*f*k+d*j,r=d*f*k+e*j,d=e*f*k-d*j,e=h+(1-h)*i,f=a[0],h=a[1],i=a[2],j=a[3],k=a[4],n=a[5],s=a[6],t=a[7],u=a[8],v=a[9],w=a[10],x=a[11];a[0]=c*f+b*k+l*u;a[1]=c*h+b*n+l*v;a[2]=c*i+b*s+l*w;a[3]=c*j+b*t+l*x;a[4]=m*f+g*k+q*u;a[5]=m*h+g*n+q*v;a[6]=m*i+g*s+q*w;a[7]=m*j+g*t+q*x;a[8]=
r*f+d*k+e*u;a[9]=r*h+d*n+e*v;a[10]=r*i+d*s+e*w;a[11]=r*j+d*t+e*x;return a};tdl.fast.matrix4.scaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};tdl.fast.matrix4.scale=function(a,b){var c=b[0],d=b[1],e=b[2];a[0]*=c;a[1]*=c;a[2]*=c;a[3]*=c;a[4]*=d;a[5]*=d;a[6]*=d;a[7]*=d;a[8]*=e;a[9]*=e;a[10]*=e;a[11]*=e;return a};
tdl.fast.installRowMajorFunctions=function(){for(var a in tdl.fast.rowMajor)tdl.fast[a]=tdl.fast.rowMajor[a]};tdl.fast.installColumnMajorFunctions=function(){for(var a in tdl.fast.columnMajor)tdl.fast[a]=tdl.fast.columnMajor[a]};tdl.fast.installRowMajorFunctions();tdl.quaternions=tdl.quaternions||{};tdl.quaternions.mathType=function(a){return"number"===typeof a?"Scalar":"Quaternion"};tdl.quaternions.identity=function(){return[0,0,0,1]};tdl.quaternions.copy=function(a){return a.slice()};
tdl.quaternions.negative=function(a){return[-a[0],-a[1],-a[2],-a[3]]};tdl.quaternions.addQuaternionQuaternion=function(a,b){return[a[0]+b[0],a[1]+b[1],a[2]+b[2],a[3]+b[3]]};tdl.quaternions.addQuaternionScalar=function(a,b){return a.slice(0,3).concat(a[3]+b)};tdl.quaternions.addScalarQuaternion=function(a,b){return b.slice(0,3).concat(a+b[3])};tdl.quaternions.subQuaternionQuaternion=function(a,b){return[a[0]-b[0],a[1]-b[1],a[2]-b[2],a[3]-b[3]]};
tdl.quaternions.subQuaternionScalar=function(a,b){return a.slice(0,3).concat(a[3]-b)};tdl.quaternions.subScalarQuaternion=function(a,b){return[-b[0],-b[1],-b[2],a-b[3]]};tdl.quaternions.mulScalarQuaternion=function(a,b){return[a*b[0],a*b[1],a*b[2],a*b[3]]};tdl.quaternions.mulQuaternionScalar=function(a,b){return[b*a[0],b*a[1],b*a[2],b*a[3]]};
tdl.quaternions.mulQuaternionQuaternion=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],i=b[2],j=b[3];return[f*g+c*j+d*i-e*h,f*h+d*j+e*g-c*i,f*i+e*j+c*h-d*g,f*j-c*g-d*h-e*i]};tdl.quaternions.divQuaternionQuaternion=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],i=b[2],j=b[3],k=1/(j*j+g*g+h*h+i*i);return[(c*j-f*g-d*i+e*h)*k,(c*i-f*h+d*j-e*g)*k,(d*g+e*j-f*i-c*h)*k,(f*j+c*g+d*h+e*i)*k]};tdl.quaternions.divQuaternionScalar=function(a,b){return[a[0]/b,a[1]/b,a[2]/b,a[3]/b]};
tdl.quaternions.divScalarQuaternion=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=1/(c*c+d*d+e*e+f*f);return[-a*c*g,-a*d*g,-a*e*g,a*f*g]};tdl.quaternions.inverse=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];var e=1/(b*b+c*c+d*d+a*a);return[-b*e,-c*e,-d*e,a*e]};tdl.quaternions.mul=function(a,b){return tdl.quaternions["mul"+tdl.quaternions.mathType(a)+tdl.quaternions.mathType(b)](a,b)};
tdl.quaternions.div=function(a,b){return tdl.quaternions["div"+tdl.quaternions.mathType(a)+tdl.quaternions.mathType(b)](a,b)};tdl.quaternions.add=function(a,b){return tdl.quaternions["add"+tdl.quaternions.mathType(a)+tdl.quaternions.mathType(b)](a,b)};tdl.quaternions.sub=function(a,b){return tdl.quaternions["sub"+tdl.quaternions.mathType(a)+tdl.quaternions.mathType(b)](a,b)};tdl.quaternions.length=function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]+a[3]*a[3])};
tdl.quaternions.lengthSquared=function(a){return a[0]*a[0]+a[1]*a[1]+a[2]*a[2]+a[3]*a[3]};tdl.quaternions.normalize=function(a){var b=1/Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]+a[3]*a[3]);return[a[0]*b,a[1]*b,a[2]*b,a[3]*b]};tdl.quaternions.conjugate=function(a){return[-a[0],-a[1],-a[2],a[3]]};tdl.quaternions.rotationX=function(a){return[Math.sin(a/2),0,0,Math.cos(a/2)]};tdl.quaternions.rotationY=function(a){return[0,Math.sin(a/2),0,Math.cos(a/2)]};
tdl.quaternions.rotationZ=function(a){return[0,0,Math.sin(a/2),Math.cos(a/2)]};tdl.quaternions.axisRotation=function(a,b){var c=1/Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]),d=Math.sin(b/2),e=Math.cos(b/2);return[d*a[0]*c,d*a[1]*c,d*a[2]*c,e]};
tdl.quaternions.quaternionToRotation=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];a=e*e;var f=e*b,g=e*c,e=e*d,h=b*b,i=b*c,b=b*d,j=c*c,c=c*d,d=d*d,k=a+h+j+d;return[(a+h-j-d)/k,2*(e+i)/k,2*(b-g)/k,0,2*(i-e)/k,(a-h+j-d)/k,2*(f+c)/k,0,2*(g+b)/k,2*(c-f)/k,(a-h-j+d)/k,0,0,0,0,1]};
tdl.quaternions.rotationToQuaternion=function(a){var b,c,d;a[0]>a[5]&&a[0]>a[10]?(b=0,c=1,d=2):a[5]>a[0]&&a[5]>a[10]?(b=1,c=2,d=0):(b=2,c=0,d=1);var e=Math.sqrt(1+a[4*b+b]-a[4*c+c]-a[4*d+d]),f=[];f[b]=0.5*e;f[c]=0.5*(a[4*c+b]+a[4*b+c])/e;f[d]=0.5*(a[4*b+d]+a[4*d+b])/e;f[3]=0.5*(a[4*c+d]-a[4*d+c])/e;return f};try{module.exports=tdl}catch(e$$10){}tdl.math=tdl.math||{};tdl.math.randomSeed_=0;tdl.math.RANDOM_RANGE_=Math.pow(2,32);tdl.math.matrix4=tdl.math.matrix4||{};
tdl.math.rowMajor=tdl.math.rowMajor||{};tdl.math.columnMajor=tdl.math.columnMajor||{};tdl.math.pseudoRandom=function(){var a=tdl.math;return(a.randomSeed_=(134775813*a.randomSeed_+1)%a.RANDOM_RANGE_)/a.RANDOM_RANGE_};tdl.math.resetPseudoRandom=function(){tdl.math.randomSeed_=0};tdl.math.randomInt=function(a){return Math.floor(Math.random()*a)};tdl.math.degToRad=function(a){return a*Math.PI/180};tdl.math.radToDeg=function(a){return 180*a/Math.PI};
tdl.math.lerpScalar=function(a,b,c){return(1-c)*a+c*b};tdl.math.addVector=function(a,b){for(var c=[],d=a.length,e=0;e<d;++e)c[e]=a[e]+b[e];return c};tdl.math.subVector=function(a,b){for(var c=[],d=a.length,e=0;e<d;++e)c[e]=a[e]-b[e];return c};tdl.math.lerpVector=function(a,b,c){for(var d=[],e=a.length,f=0;f<e;++f)d[f]=(1-c)*a[f]+c*b[f];return d};tdl.math.modClamp=function(a,b,c){c=c||0;if(1E-5>b)return c;a-=c;a=0>a?a-Math.floor(a/b)*b:a%b;return a+c};
tdl.math.lerpCircular=function(a,b,c,d){a=tdl.math.modClamp(a,d);b=tdl.math.modClamp(b,d);var e=b-a;Math.abs(e)>0.5*d&&(b=0<e?b-d:b+d);return tdl.math.modClamp(tdl.math.lerpScalar(a,b,c),d)};tdl.math.lerpRadian=function(a,b,c){return tdl.math.lerpCircular(a,b,c,2*Math.PI)};tdl.math.divVectorScalar=function(a,b){for(var c=[],d=a.length,e=0;e<d;++e)c[e]=a[e]/b;return c};tdl.math.dot=function(a,b){for(var c=0,d=a.length,e=0;e<d;++e)c+=a[e]*b[e];return c};
tdl.math.cross=function(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]};tdl.math.length=function(a){for(var b=0,c=a.length,d=0;d<c;++d)b+=a[d]*a[d];return Math.sqrt(b)};tdl.math.lengthSquared=function(a){for(var b=0,c=a.length,d=0;d<c;++d)b+=a[d]*a[d];return b};tdl.math.distance=function(a,b){for(var c=0,d=a.length,e=0;e<d;++e)var f=a[e]-b[e],c=c+f*f;return Math.sqrt(c)};tdl.math.distanceSquared=function(a,b){for(var c=0,d=a.length,e=0;e<d;++e)var f=a[e]-b[e],c=c+f*f;return c};
tdl.math.normalize=function(a){for(var b=[],c=0,d=a.length,e=0;e<d;++e)c+=a[e]*a[e];c=Math.sqrt(c);if(1E-5<c)for(e=0;e<d;++e)b[e]=a[e]/c;else b=[0,0,0];return b};tdl.math.addMatrix=function(a,b){for(var c=[],d=a.length,e=a[0].length,f=0;f<d;++f){for(var g=[],h=a[f],i=b[f],j=0;j<e;++j)g[j]=h[j]+i[j];c[f]=g}return c};tdl.math.subMatrix=function(a,b){for(var c=[],d=a.length,e=a[0].length,f=0;f<d;++f){for(var g=[],h=a[f],i=b[f],j=0;j<e;++j)g[j]=h[j]-i[j];c[f]=g}return c};
tdl.math.lerpMatrix=function(a,b,c){for(var d=[],e=a.length,f=0;f<e;++f)d[f]=(1-c)*a[f]+c*b[f];return d};tdl.math.divMatrixScalar=function(a,b){for(var c=[],d=a.length,e=0;e<d;++e)c[e]=a[e]/b;return c};tdl.math.negativeScalar=function(a){return-a};tdl.math.negativeVector=function(a){for(var b=[],c=a.length,d=0;d<c;++d)b[d]=-a[d];return b};tdl.math.negativeMatrix=function(a){for(var b=[],c=a.length,d=0;d<c;++d)b[d]=-a[d];return b};tdl.math.copyScalar=function(a){return a};
tdl.math.copyVector=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b};tdl.math.copyMatrix=function(a){for(var b=[],c=a.length,d=0;d<c;++d)b[d]=a[d];return b};tdl.math.mulScalarScalar=function(a,b){return a*b};tdl.math.mulScalarVector=function(a,b){for(var c=[],d=b.length,e=0;e<d;++e)c[e]=a*b[e];return c};tdl.math.mulVectorScalar=function(a,b){return tdl.math.mulScalarVector(b,a)};tdl.math.mulScalarMatrix=function(a,b){for(var c=[],d=b.length,e=0;e<d;++e)c[e]=a*b[e];return c};
tdl.math.mulMatrixScalar=function(a,b){return tdl.math.mulScalarMatrix(b,a)};tdl.math.mulVectorVector=function(a,b){for(var c=[],d=a.length,e=0;e<d;++e)c[e]=a[e]*b[e];return c};tdl.math.divVectorVector=function(a,b){for(var c=[],d=a.length,e=0;e<d;++e)c[e]=a[e]/b[e];return c};tdl.math.rowMajor.mulVectorMatrix4=function(a,b){for(var c=[],d=0;4>d;++d)for(var e=c[d]=0;4>e;++e)c[d]+=a[e]*b[4*e+d];return c};
tdl.math.columnMajor.mulVectorMatrix=function(a){for(var b=[],c=0;4>c;++c)for(var d=b[c]=0;4>d;++d)b[c]+=a[d]*b[4*c+d];return b};tdl.math.mulVectorMatrix=null;tdl.math.rowMajor.mulMatrixVector=function(a,b){for(var c=[],d=0;4>d;++d)for(var e=c[d]=0;4>e;++e)c[d]+=a[4*d+e]*b[e];return c};tdl.math.columnMajor.mulMatrixVector=function(a,b){for(var c=[],d=0;4>d;++d)for(var e=c[d]=0;4>e;++e)c[d]+=b[e]*a[4*e+d];return c};tdl.math.mulMatrixVector=null;
tdl.math.rowMajor.mulMatrixMatrix2=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],i=b[2],j=b[3];return[c*g+d*i,c*h+d*j,e*g+f*i,e*h+f*j]};tdl.math.columnMajor.mulMatrixMatrix2=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],i=b[2],j=b[3];return[c*g+e*h,d*g+f*h,c*i+e*j,d*i+f*j]};tdl.math.mulMatrixMatrix2=null;
tdl.math.rowMajor.mulMatrixMatrix3=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=a[8],l=b[0],m=b[1],q=b[2],r=b[3],n=b[4],s=b[5],t=b[6],u=b[7],v=b[8];return[c*l+d*r+e*t,c*m+d*n+e*u,c*q+d*s+e*v,f*l+g*r+h*t,f*m+g*n+h*u,f*q+g*s+h*v,i*l+j*r+k*t,i*m+j*n+k*u,i*q+j*s+k*v]};
tdl.math.columnMajor.mulMatrixMatrix3=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=a[8],l=b[0],m=b[1],q=b[2],r=b[3],n=b[4],s=b[5],t=b[6],u=b[7],v=b[8];return[c*l+f*m+i*q,d*l+g*m+j*q,e*l+h*m+k*q,c*r+f*n+i*s,d*r+g*n+j*s,e*r+h*n+k*s,c*t+f*u+i*v,d*t+g*u+j*v,e*t+h*u+k*v]};tdl.math.mulMatrixMatrix3=null;
tdl.math.rowMajor.mulMatrixMatrix4=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=a[8],l=a[9],m=a[10],q=a[11],r=a[12],n=a[13],s=a[14],t=a[15],u=b[0],v=b[1],w=b[2],x=b[3],z=b[4],A=b[5],B=b[6],C=b[7],D=b[8],E=b[9],F=b[10],y=b[11],G=b[12],H=b[13],I=b[14],J=b[15];return[c*u+d*z+e*D+f*G,c*v+d*A+e*E+f*H,c*w+d*B+e*F+f*I,c*x+d*C+e*y+f*J,g*u+h*z+i*D+j*G,g*v+h*A+i*E+j*H,g*w+h*B+i*F+j*I,g*x+h*C+i*y+j*J,k*u+l*z+m*D+q*G,k*v+l*A+m*E+q*H,k*w+l*B+m*F+q*I,k*x+l*C+m*y+q*J,r*u+n*z+s*D+t*
G,r*v+n*A+s*E+t*H,r*w+n*B+s*F+t*I,r*x+n*C+s*y+t*J]};
tdl.math.columnMajor.mulMatrixMatrix4=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=a[8],l=a[9],m=a[10],q=a[11],r=a[12],n=a[13],s=a[14],t=a[15],u=b[0],v=b[1],w=b[2],x=b[3],z=b[4],A=b[5],B=b[6],C=b[7],D=b[8],E=b[9],F=b[10],y=b[11],G=b[12],H=b[13],I=b[14],J=b[15];return[c*u+g*v+k*w+r*x,d*u+h*v+l*w+n*x,e*u+i*v+m*w+s*x,f*u+j*v+q*w+t*x,c*z+g*A+k*B+r*C,d*z+h*A+l*B+n*C,e*z+i*A+m*B+s*C,f*z+j*A+q*B+t*C,c*D+g*E+k*F+r*y,d*D+h*E+l*F+n*y,e*D+i*E+m*F+s*y,f*D+j*E+q*F+t*y,c*G+g*H+k*
I+r*J,d*G+h*H+l*I+n*J,e*G+i*H+m*I+s*J,f*G+j*H+q*I+t*J]};tdl.math.mulMatrixMatrix4=null;tdl.math.rowMajor.mulMatrixMatrix=function(a,b){for(var c=[],d=0;4>d;++d)for(var e=0;4>e;++e)for(var f=c[4*d+e]=0;4>f;++f)c[4*d+e]+=a[4*d+f]*b[4*f+e];return c};tdl.math.columnMajor.mulMatrixMatrix=function(a,b){for(var c=[],d=0;4>d;++d)for(var e=0;4>e;++e)for(var f=c[4*d+e]=0;4>f;++f)c[4*d+e]+=b[4*d+f]*a[4*f+e];return c};tdl.math.mulMatrixMatrix=null;
tdl.math.rowMajor.column=function(a,b){for(var c=[],d=0;4>d;++d)c[d]=a[4*d+b];return c};tdl.math.columnMajor.column=function(a,b){for(var c=[],d=0;4>d;++d)c[d]=a[4*b+d];return c};tdl.math.column=null;tdl.math.rowMajor.row=function(a,b){for(var c=[],d=0;4>d;++d)c[b]=a[4*b+d];return c};tdl.math.columnMajor.row=function(a,b,c){c=c||4;for(var d=[],e=0;e<c;++e)d[e]=a[e*c+b];return d};tdl.math.row=null;
tdl.math.transpose=function(a){var b=[],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],q=a[12],r=a[13],n=a[14],s=a[15];b[0]=a[0];b[1]=f;b[2]=j;b[3]=q;b[4]=c;b[5]=g;b[6]=k;b[7]=r;b[8]=d;b[9]=h;b[10]=l;b[11]=n;b[12]=e;b[13]=i;b[14]=m;b[15]=s;return b};tdl.math.trace=function(a){for(var b=0,c=0;4>c;++c)b+=a[4*c+c];return b};tdl.math.det1=function(a){return a[0]};tdl.math.det2=function(a){return a[0]*a[3]-a[1]*a[2]};
tdl.math.det3=function(a){return a[8]*(a[0]*a[4]-a[1]*a[3])-a[7]*(a[0]*a[5]-a[2]*a[3])+a[6]*(a[1]*a[5]-a[2]*a[4])};tdl.math.det4=function(a){var b=a[0]*a[5]-a[1]*a[4],c=a[0]*a[6]-a[2]*a[4],d=a[0]*a[7]-a[3]*a[4],e=a[1]*a[6]-a[2]*a[5],f=a[1]*a[7]-a[3]*a[5],g=a[2]*a[7]-a[3]*a[6];return a[15]*(a[10]*b-a[9]*c+a[8]*e)-a[14]*(a[11]*b-a[9]*d+a[8]*f)+a[13]*(a[11]*c-a[10]*d+a[8]*g)-a[12]*(a[11]*e-a[10]*f+a[9]*g)};tdl.math.inverse1=function(a){return[[1/a[0]]]};
tdl.math.inverse2=function(a){var b=1/(a[0]*a[3]-a[1]*a[2]);return[b*a[3],-b*a[1],-b*a[2],b*a[0]]};tdl.math.inverse3=function(a){var b=a[4]*a[8]-a[5]*a[7],c=a[1]*a[8]-a[2]*a[7],d=a[1]*a[5]-a[2]*a[4],e=1/(a[0]*b-a[3]*c+a[6]*d);return[e*b,-e*c,e*d,-e*(a[3]*a[8]-a[5]*a[6]),e*(a[0]*a[8]-a[2]*a[6]),-e*(a[0]*a[5]-a[2]*a[3]),e*(a[3]*a[7]-a[4]*a[6]),-e*(a[0]*a[7]-a[1]*a[6]),e*(a[0]*a[4]-a[1]*a[3])]};
tdl.math.inverse4=function(a){var b=a[10]*a[15],c=a[14]*a[11],d=a[6]*a[15],e=a[14]*a[7],f=a[6]*a[11],g=a[10]*a[7],h=a[2]*a[15],i=a[14]*a[3],j=a[2]*a[11],k=a[10]*a[3],l=a[2]*a[7],m=a[6]*a[3],q=a[8]*a[13],r=a[12]*a[9],n=a[4]*a[13],s=a[12]*a[5],t=a[4]*a[9],u=a[8]*a[5],v=a[0]*a[13],w=a[12]*a[1],x=a[0]*a[9],z=a[8]*a[1],A=a[0]*a[5],B=a[4]*a[1],C=b*a[5]+e*a[9]+f*a[13]-(c*a[5]+d*a[9]+g*a[13]),D=c*a[1]+h*a[9]+k*a[13]-(b*a[1]+i*a[9]+j*a[13]),E=d*a[1]+i*a[5]+l*a[13]-(e*a[1]+h*a[5]+m*a[13]),F=g*a[1]+j*a[5]+m*
a[9]-(f*a[1]+k*a[5]+l*a[9]),y=1/(a[0]*C+a[4]*D+a[8]*E+a[12]*F);return[y*C,y*D,y*E,y*F,y*(c*a[4]+d*a[8]+g*a[12]-(b*a[4]+e*a[8]+f*a[12])),y*(b*a[0]+i*a[8]+j*a[12]-(c*a[0]+h*a[8]+k*a[12])),y*(e*a[0]+h*a[4]+m*a[12]-(d*a[0]+i*a[4]+l*a[12])),y*(f*a[0]+k*a[4]+l*a[8]-(g*a[0]+j*a[4]+m*a[8])),y*(q*a[7]+s*a[11]+t*a[15]-(r*a[7]+n*a[11]+u*a[15])),y*(r*a[3]+v*a[11]+z*a[15]-(q*a[3]+w*a[11]+x*a[15])),y*(n*a[3]+w*a[7]+A*a[15]-(s*a[3]+v*a[7]+B*a[15])),y*(u*a[3]+x*a[7]+B*a[11]-(t*a[3]+z*a[7]+A*a[11])),y*(n*a[10]+u*
a[14]+r*a[6]-(t*a[14]+q*a[6]+s*a[10])),y*(x*a[14]+q*a[2]+w*a[10]-(v*a[10]+z*a[14]+r*a[2])),y*(v*a[6]+B*a[14]+s*a[2]-(A*a[14]+n*a[2]+w*a[6])),y*(A*a[10]+t*a[2]+z*a[6]-(x*a[6]+B*a[10]+u*a[2]))]};tdl.math.codet=function(a,b,c){for(var d=[],e=0,f=0;3>f;++f){e==b&&e++;for(var g=0,h=0;3>h;++h)g==c&&g++,d[4*f+h]=a[4*e+g],g++;e++}return tdl.math.det(d)};tdl.math.det=function(a){return tdl.math.det4(a)};tdl.math.inverse=function(a){return tdl.math.inverse4(a)};tdl.math.orthonormalize=function(){};
tdl.math.matrix4.inverse=function(a){return tdl.math.inverse4(a)};tdl.math.matrix4.mul=function(a,b){return tdl.math.mulMatrixMatrix4(a,b)};tdl.math.matrix4.det=function(a){return tdl.math.det4(a)};tdl.math.matrix4.copy=function(a){return tdl.math.copyMatrix(a)};tdl.math.matrix4.transpose=tdl.math.transpose;tdl.math.matrix4.setUpper3x3=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[4]=b[3];a[5]=b[4];a[6]=b[5];a[8]=b[6];a[9]=b[7];a[10]=b[8];return a};
tdl.math.matrix4.getUpper3x3=function(a){return[a[0],a[1],a[2],a[4],a[5],a[6],a[8],a[9],a[10]]};tdl.math.matrix4.setTranslation=function(a,b){a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};tdl.math.matrix4.getTranslation=function(a){return[a[12],a[13],a[14],a[15]]};tdl.math.matrix4.transformPoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=c*a[3]+d*a[7]+e*a[11]+a[15];return[(c*a[0]+d*a[4]+e*a[8]+a[12])/f,(c*a[1]+d*a[5]+e*a[9]+a[13])/f,(c*a[2]+d*a[6]+e*a[10]+a[14])/f]};
tdl.math.matrix4.transformVector4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3];return[c*a[0]+d*a[4]+e*a[8]+f*a[12],c*a[1]+d*a[5]+e*a[9]+f*a[13],c*a[2]+d*a[6]+e*a[10]+f*a[14],c*a[3]+d*a[7]+e*a[11]+f*a[15]]};tdl.math.matrix4.transformDirection=function(a,b){var c=b[0],d=b[1],e=b[2];return[c*a[0]+d*a[4]+e*a[8],c*a[1]+d*a[5]+e*a[9],c*a[2]+d*a[6]+e*a[10]]};
tdl.math.matrix4.transformNormal=function(a,b){var c=tdl.math.inverse4(a),d=b[0],e=b[1],f=b[2];return[d*c[0]+e*c[1]+f*c[2],d*c[4]+e*c[5]+f*c[6],d*c[8]+e*c[9]+f*c[10]]};tdl.math.matrix4.identity=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};tdl.math.matrix4.setIdentity=function(a){for(var b=0;4>b;b++)for(var c=0;4>c;c++)a[4*b+c]=b==c?1:0;return a};tdl.math.matrix4.perspective=function(a,b,c,d){a=Math.tan(0.5*Math.PI-0.5*a);var e=1/(c-d);return[a/b,0,0,0,0,a,0,0,0,0,(c+d)*e,-1,0,0,2*c*d*e,0]};
tdl.math.matrix4.orthographic=function(a,b,c,d,e,f){return[2/(b-a),0,0,0,0,2/(d-c),0,0,0,0,1/(e-f),0,(a+b)/(a-b),(c+d)/(c-d),e/(e-f),1]};tdl.math.matrix4.frustum=function(a,b,c,d,e,f){var g=b-a,h=d-c,i=e-f;return[2*e/g,0,0,0,0,2*e/h,0,0,(a+b)/g,(d+c)/h,f/i,-1,0,0,e*f/i,0]};tdl.math.matrix4.lookAt=function(a,b,c){return tdl.math.inverse(tdl.math.matrix4.cameraLookAt(a,b,c))};
tdl.math.matrix4.cameraLookAt=function(a,b,c){b=tdl.math.normalize(tdl.math.subVector(a,b));c=tdl.math.normalize(tdl.math.cross(c,b));var d=tdl.math.cross(b,c);return tdl.math.inverse([c[0],c[1],c[2],0,d[0],d[1],d[2],0,b[0],b[1],b[2],0,-tdl.math.dot(c,a),-tdl.math.dot(d,a),-tdl.math.dot(b,a),1])};
tdl.math.matrix4.composition=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=a[8],l=a[9],m=a[10],q=a[11],r=a[12],n=a[13],s=a[14],t=a[15],u=b[0],v=b[1],w=b[2],x=b[3],z=b[4],A=b[5],B=b[6],C=b[7],D=b[8],E=b[9],F=b[10],y=b[11],G=b[12],H=b[13],I=b[14],J=b[15];return[c*u+g*v+k*w+r*x,d*u+h*v+l*w+n*x,e*u+i*v+m*w+s*x,f*u+j*v+q*w+t*x,c*z+g*A+k*B+r*C,d*z+h*A+l*B+n*C,e*z+i*A+m*B+s*C,f*z+j*A+q*B+t*C,c*D+g*E+k*F+r*y,d*D+h*E+l*F+n*y,e*D+i*E+m*F+s*y,f*D+j*E+q*F+t*y,c*G+g*H+k*I+r*J,d*G+
h*H+l*I+n*J,e*G+i*H+m*I+s*J,f*G+j*H+q*I+t*J]};
tdl.math.matrix4.compose=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=a[8],l=a[9],m=a[10],q=a[11],r=a[12],n=a[13],s=a[14],t=a[15],u=b[0],v=b[1],w=b[2],x=b[3],z=b[4],A=b[5],B=b[6],C=b[7],D=b[8],E=b[9],F=b[10],y=b[11],G=b[12],H=b[13],I=b[14],J=b[15];a[0]=c*u+g*v+k*w+r*x;a[1]=d*u+h*v+l*w+n*x;a[2]=e*u+i*v+m*w+s*x;a[3]=f*u+j*v+q*w+t*x;a[4]=c*z+g*A+k*B+r*C;a[5]=d*z+h*A+l*B+n*C;a[6]=e*z+i*A+m*B+s*C;a[7]=f*z+j*A+q*B+t*C;a[8]=c*D+g*E+k*F+r*y;a[9]=d*D+h*E+l*F+n*y;a[10]=e*D+i*
E+m*F+s*y;a[11]=f*D+j*E+q*F+t*y;a[12]=c*G+g*H+k*I+r*J;a[13]=d*G+h*H+l*I+n*J;a[14]=e*G+i*H+m*I+s*J;a[15]=f*G+j*H+q*I+t*J;return a};tdl.math.matrix4.translation=function(a){return[1,0,0,0,0,1,0,0,0,0,1,0,a[0],a[1],a[2],1]};tdl.math.matrix4.translate=function(a,b){var c=a[1],d=a[2],e=a[3],f=a[5],g=a[6],h=a[7],i=a[9],j=a[10],k=a[11],l=a[13],m=a[14],q=a[15],r=b[0],n=b[1],s=b[2];a[12]=a[0]*r+a[4]*n+a[8]*s+a[12];a[13]=c*r+f*n+i*s+l;a[14]=d*r+g*n+j*s+m;a[15]=e*r+h*n+k*s+q;return a};
tdl.math.matrix4.scaling=function(a){return[a[0],0,0,0,0,a[1],0,0,0,0,a[2],0,0,0,0,1]};tdl.math.matrix4.scale=function(a,b){var c=b[0],d=b[1],e=b[2];a[0]*=c;a[1]*=c;a[2]*=c;a[3]*=c;a[4]*=d;a[5]*=d;a[6]*=d;a[7]*=d;a[8]*=e;a[9]*=e;a[10]*=e;a[11]*=e;return a};tdl.math.matrix4.rotationX=function(a){var b=Math.cos(a);a=Math.sin(a);return[1,0,0,0,0,b,a,0,0,-a,b,0,0,0,0,1]};
tdl.math.matrix4.rotateX=function(a,b){var c=a[4],d=a[5],e=a[6],f=a[7],g=a[8],h=a[9],i=a[10],j=a[11],k=Math.cos(b),l=Math.sin(b);a[4]=k*c+l*g;a[5]=k*d+l*h;a[6]=k*e+l*i;a[7]=k*f+l*j;a[8]=k*g-l*c;a[9]=k*h-l*d;a[10]=k*i-l*e;a[11]=k*j-l*f;return a};tdl.math.matrix4.rotationY=function(a){var b=Math.cos(a);a=Math.sin(a);return[b,0,-a,0,0,1,0,0,a,0,b,0,0,0,0,1]};
tdl.math.matrix4.rotateY=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[8],h=a[9],i=a[10],j=a[11],k=Math.cos(b),l=Math.sin(b);a[0]=k*c-l*g;a[1]=k*d-l*h;a[2]=k*e-l*i;a[3]=k*f-l*j;a[8]=k*g+l*c;a[9]=k*h+l*d;a[10]=k*i+l*e;a[11]=k*j+l*f;return a};tdl.math.matrix4.rotationZ=function(a){var b=Math.cos(a);a=Math.sin(a);return[b,a,0,0,-a,b,0,0,0,0,1,0,0,0,0,1]};
tdl.math.matrix4.rotateZ=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=Math.cos(b),l=Math.sin(b);a[0]=k*c+l*g;a[1]=k*d+l*h;a[2]=k*e+l*i;a[3]=k*f+l*j;a[4]=k*g-l*c;a[5]=k*h-l*d;a[6]=k*i-l*e;a[7]=k*j-l*f;return a};tdl.math.matrix4.rotationZYX=function(a){var b=Math.sin(a[0]),c=Math.cos(a[0]),d=Math.sin(a[1]),e=Math.cos(a[1]),f=Math.sin(a[2]);a=Math.cos(a[2]);var g=a*d,h=f*d;return[a*e,f*e,-d,0,g*b-f*c,h*b+a*c,e*b,0,g*c+f*b,h*c-a*b,e*c,0,0,0,0,1]};
tdl.math.matrix4.rotateZYX=function(a,b){var c=Math.sin(b[0]),d=Math.cos(b[0]),e=Math.sin(b[1]),f=Math.cos(b[1]),g=Math.sin(b[2]),h=Math.cos(b[2]),i=h*e,j=g*e,k=h*f,l=g*f,e=-e,m=i*c-g*d,q=j*c+h*d,r=f*c,g=i*d+g*c,c=j*d-h*c,d=f*d,f=a[0],h=a[1],j=a[2],i=a[3],n=a[4],s=a[5],t=a[6],u=a[7],v=a[8],w=a[9],x=a[10],z=a[11];a[0]=k*f+l*n+e*v;a[1]=k*h+l*s+e*w;a[2]=k*j+l*t+e*x;a[3]=k*i+l*u+e*z;a[4]=m*f+q*n+r*v;a[5]=m*h+q*s+r*w;a[6]=m*j+q*t+r*x;a[7]=m*i+q*u+r*z;a[8]=g*f+c*n+d*v;a[9]=g*h+c*s+d*w;a[10]=g*j+c*t+d*x;
a[11]=g*i+c*u+d*z;return a};tdl.math.matrix4.axisRotation=function(a,b){var c=a[0],d=a[1],e=a[2],f=Math.sqrt(c*c+d*d+e*e),c=c/f,d=d/f,e=e/f,f=c*c,g=d*d,h=e*e,i=Math.cos(b),j=Math.sin(b),k=1-i;return[f+(1-f)*i,c*d*k+e*j,c*e*k-d*j,0,c*d*k-e*j,g+(1-g)*i,d*e*k+c*j,0,c*e*k+d*j,d*e*k-c*j,h+(1-h)*i,0,0,0,0,1]};
tdl.math.matrix4.axisRotate=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=Math.sqrt(d*d+e*e+f*f);d/=b;e/=b;f/=b;b=d*d;var g=e*e,h=f*f,i=Math.cos(c),j=Math.sin(c),k=1-i;c=b+(1-b)*i;b=d*e*k+f*j;var l=d*f*k-e*j,m=d*e*k-f*j,g=g+(1-g)*i,q=e*f*k+d*j,r=d*f*k+e*j,d=e*f*k-d*j,e=h+(1-h)*i,f=a[0],h=a[1],i=a[2],j=a[3],k=a[4],n=a[5],s=a[6],t=a[7],u=a[8],v=a[9],w=a[10],x=a[11];a[0]=c*f+b*k+l*u;a[1]=c*h+b*n+l*v;a[2]=c*i+b*s+l*w;a[3]=c*j+b*t+l*x;a[4]=m*f+g*k+q*u;a[5]=m*h+g*n+q*v;a[6]=m*i+g*s+q*w;a[7]=m*j+g*t+q*x;a[8]=
r*f+d*k+e*u;a[9]=r*h+d*n+e*v;a[10]=r*i+d*s+e*w;a[11]=r*j+d*t+e*x;return a};tdl.math.installRowMajorFunctions=function(){for(var a in tdl.math.rowMajor)tdl.math[a]=tdl.math.rowMajor[a]};tdl.math.installColumnMajorFunctions=function(){for(var a in tdl.math.columnMajor)tdl.math[a]=tdl.math.columnMajor[a]};tdl.math.installErrorCheckFunctions=function(){for(var a in tdl.math.errorCheck)tdl.math[a]=tdl.math.errorCheck[a]};
tdl.math.installErrorCheckFreeFunctions=function(){for(var a in tdl.math.errorCheckFree)tdl.math[a]=tdl.math.errorCheckFree[a]};tdl.math.installRowMajorFunctions();tdl.math.installErrorCheckFunctions();try{glm.exists&&alert("glm.common.js loaded over exist glm instance: "+glm)}catch(e$$11){}glm=null;GLMJS_PREFIX="glm-js: ";
GLM={$DEBUG:"undefined"!==typeof $GLM_DEBUG&&$GLM_DEBUG,version:"0.0.6c",GLM_VERSION:96,$outer:{polyfills:GLM_polyfills(),functions:{},intern:function(a,b){if(a)if(void 0===b&&"object"===typeof a)for(var c in a)GLM.$outer.intern(c,a[c]);else return GLM.$DEBUG&&GLM.$outer.console.debug("intern "+a,b&&(b.name||typeof b)),GLM.$outer[a]=b},$import:function(a){GLM.$outer.$import=function(){throw Error("glm.$outer.$import already called...");};GLM.$outer.intern(a.statics);GLM.$template.extend(GLM,GLM.$template["declare<T,V,number>"](a["declare<T,V,number>"]),
GLM.$template["declare<T,V,...>"](a["declare<T,V,...>"]),GLM.$template["declare<T,...>"](a["declare<T,...>"]),GLM.$template["declare<T>"](a["declare<T>"]));GLM.$init(a)},console:$GLM_reset_logging(),quat_array_from_xyz:function(a){var b=glm.quat(),c=glm.mat3(1);b["*="](glm.angleAxis(a.x,c[0]));b["*="](glm.angleAxis(a.y,c[1]));b["*="](glm.angleAxis(a.z,c[2]));return b.elements},Array:Array,ArrayBuffer:ArrayBuffer,Float32Array:Float32Array,Float64Array:Float64Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,
Uint32Array:Uint32Array,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,DataView:"undefined"!==typeof DataView&&DataView,$rebindTypedArrays:function(a){var b=Object.keys(GLM.$outer).filter(RegExp.prototype.test.bind(/.Array$|^ArrayBuffer$|^DataView$/)).map(function(b){var d=a.call(this,b,GLM.$outer[b]);d!==GLM.$outer[b]&&(GLM.$outer.console.warn("$rebindTypedArrays("+b+")... replacing"),GLM.$outer[b]=d);return d});GLM.$subarray=GLM.patch_subarray();return b}},$extern:$GLM_extern,$log:$GLM_log,
GLMJSError:$GLM_GLMJSError("GLMJSError"),_radians:function(a){return a*this.PI/180}.bind(Math),_degrees:function(a){return 180*a/this.PI}.bind(Math),normalize:$GLM_extern("normalize"),inverse:$GLM_extern("inverse"),distance:$GLM_extern("distance"),length:$GLM_extern("length"),length2:$GLM_extern("length2"),transpose:$GLM_extern("transpose"),slerp:$GLM_extern("slerp"),mix:$GLM_extern("mix"),clamp:$GLM_extern("clamp"),angleAxis:$GLM_extern("angleAxis"),rotate:$GLM_extern("rotate"),scale:$GLM_extern("scale"),
translate:$GLM_extern("translate"),lookAt:$GLM_extern("lookAt"),cross:$GLM_extern("cross"),dot:$GLM_extern("dot"),perspective:function(a,b,c,d){return GLM.$outer.mat4_perspective(a,b,c,d)},ortho:function(a,b,c,d,e,f){return GLM.$outer.mat4_ortho(a,b,c,d,e,f)},_eulerAngles:function(a){return GLM.$outer.vec3_eulerAngles(a)},angle:function(a){return 2*Math.acos(a.w)},axis:function(a){var b=1-a.w*a.w;if(0>=b)return glm.vec3(0,0,1);b=1/Math.sqrt(b);return glm.vec3(a.x*b,a.y*b,a.z*b)},$from_ptr:function(a,
b,c){if(this!==GLM)throw new GLM.GLMJSError("... use glm.make_<type>() (not new glm.make<type>())");b=new GLM.$outer.Float32Array(b.buffer||b,c||0,a.componentLength);b=new GLM.$outer.Float32Array(b);return new a(b)},make_vec2:function(a,b){return GLM.$from_ptr.call(this,GLM.vec2,a,2===arguments.length?b:a.byteOffset)},make_vec3:function(a,b){return GLM.$from_ptr.call(this,GLM.vec3,a,2===arguments.length?b:a.byteOffset)},make_vec4:function(a,b){return GLM.$from_ptr.call(this,GLM.vec4,a,2===arguments.length?
b:a.byteOffset)},make_quat:function(a,b){return GLM.$from_ptr.call(this,GLM.quat,a,2===arguments.length?b:a.byteOffset)},make_mat3:function(a,b){return GLM.$from_ptr.call(this,GLM.mat3,a,2===arguments.length?b:a.byteOffset)},make_mat4:function(a,b){return GLM.$from_ptr.call(this,GLM.mat4,a,2===arguments.length?b:a.byteOffset)},diagonal4x4:function(a){if("vec4"!==GLM.$typeof(a))throw new GLM.GLMJSError("unsupported argtype to GLM.diagonal4x4: "+["type:"+GLM.$typeof(a)]);a=a.elements;return new GLM.mat4([a[0],
0,0,0,0,a[1],0,0,0,0,a[2],0,0,0,0,a[3]])},diagonal3x3:function(a){if("vec3"!==GLM.$typeof(a))throw new GLM.GLMJSError("unsupported argtype to GLM.diagonal3x3: "+["type:"+GLM.$typeof(a)]);a=a.elements;return new GLM.mat3([a[0],0,0,0,a[1],0,0,0,a[2]])},_toMat4:function(a){return new GLM.mat4(GLM.$outer.mat4_array_from_quat(a))},FAITHFUL:!0,to_string:function(a,b){try{var c=a.$type||typeof a;if(!GLM[c])throw new GLM.GLMJSError("unsupported argtype to GLM.to_string: "+["type:"+c,a]);return GLM.FAITHFUL?
GLM.$to_string(a,b).replace(/[\t\n]/g,""):GLM.$to_string(a,b)}catch(d){return GLM.$DEBUG&&GLM.$outer.console.error("to_string error: ",c,a+"",d),d+""}},$sizeof:function(a){return a.BYTES_PER_ELEMENT},$types:[],$isGLMConstructor:function(a){return!!(a&&a.prototype instanceof GLM.$GLMBaseType)},$getGLMType:function(a){return a instanceof GLM.$GLMBaseType&&a.constructor||"string"===typeof a&&GLM[a]},$isGLMObject:function(a){return!!(a instanceof GLM.$GLMBaseType&&a.$type)},$typeof:function(a){return a instanceof
GLM.$GLMBaseType?a.$type:"undefined"},$to_array:function(a){return[].slice.call(a.elements)},$to_json:function(a,b,c){this instanceof GLM.$GLMBaseType&&(c=b,b=a,a=this);return JSON.stringify(GLM.$to_object(a),b,c)},$inspect:function(a){this instanceof GLM.$GLMBaseType&&(a=this);return GLM.$to_json(a,null,2)},_clamp:function(a,b,c){return a<b?b:a>c?c:a},_abs:function(a){return Math.abs(a)},_equal:function(a,b){return a===b},_epsilonEqual:function(a,b,c){return Math.abs(a-b)<c},_fract:function(a){return a-
Math.floor(a)},_frexp:function(){function a(b,c){var d=GLM.$outer.DataView||a._DataView;if(0==b)return c&&Array.isArray(c)?c[0]=c[1]=0:[0,0];d=new d(new GLM.$outer.ArrayBuffer(8));d.setFloat64(0,b);var e=d.getUint32(0)>>>20&2047;0===e&&(d.setFloat64(0,b*Math.pow(2,64)),e=(d.getUint32(0)>>>20&2047)-64);d=e-1022;e=GLM.ldexp(b,-d);return c&&Array.isArray(c)?(c[0]=d,c[1]=e):[e,d]}a._DataView=function(a){this.buffer=a;this.setFloat64=function(a,b){if(0!==a)throw Error("...this is a very limited DataView emulator");
(new Uint8Array(this.buffer)).set([].reverse.call(new Uint8Array((new Float64Array([b])).buffer)),a)};this.getUint32=function(a){if(0!==a)throw Error("...this is a very limited DataView emulator");return(new Uint32Array((new Uint8Array([].slice.call(new Uint8Array(this.buffer)).reverse())).buffer))[1]}};return a}(),_ldexp:function(a,b){return 1023<b?a*Math.pow(2,1023)*Math.pow(2,b-1023):-1074>b?a*Math.pow(2,-1074)*Math.pow(2,b+1074):a*Math.pow(2,b)},_max:Math.max,_min:Math.min,sqrt:Math.sqrt,__sign:function(a){return 0<
a?1:0>a?-1:+a},$constants:{epsilon:1E-6,euler:0.5772156649015329,e:Math.E,ln_ten:Math.LN10,ln_two:Math.LN2,pi:Math.PI,half_pi:Math.PI/2,quarter_pi:Math.PI/4,one_over_pi:1/Math.PI,two_over_pi:2/Math.PI,root_pi:Math.sqrt(Math.PI),root_two:Math.sqrt(2),root_three:Math.sqrt(3),two_over_root_pi:2/Math.sqrt(Math.PI),one_over_root_two:Math.SQRT1_2,root_two:Math.SQRT2},FIXEDPRECISION:6,$toFixedString:function(a,b,c,d){void 0===d&&(d=GLM.FIXEDPRECISION);if(!c||!c.map)throw Error("unsupported argtype to $toFixedString(..,..,props="+
typeof c+")");try{var e="";c.map(function(c){c=b[e=c];if(!c.toFixed)throw Error("!toFixed in w"+[c,a,JSON.stringify(b)]);return c.toFixed(0)})}catch(f){throw GLM.$DEBUG&&GLM.$outer.console.error("$toFixedString error",a,typeof b,Object.prototype.toString.call(b),e),GLM.$DEBUG&&glm.$log("$toFixedString error",a,typeof b,Object.prototype.toString.call(b),e),new GLM.GLMJSError(f);}c=c.map(function(a){return b[a].toFixed(d)});return a+"("+c.join(", ")+")"}};GLM._sign=Math.sign||GLM.__sign;
for(var p in GLM.$constants)(function(a,b){GLM[b]=function(){return a};GLM[b].valueOf=GLM[b]})(GLM.$constants[p],p);
GLM.$GLMBaseType=function(){function a(a,c){var d=a.$||{};this.$type=c;this.$type_name=d.name||"<"+c+">";d.components&&(this.$components=d.components[0]);this.$len=this.components=a.componentLength;this.constructor=a;this.byteLength=a.BYTES_PER_ELEMENT;GLM.$types.push(c)}a.prototype={clone:function(){return new this.constructor(new this.elements.constructor(this.elements))},toString:function(){return GLM.$to_string(this)},inspect:function(){return GLM.$inspect(this)},toJSON:function(){return GLM.$to_object(this)}};
Object.defineProperty(a.prototype,"address",{get:function(){var a=this.elements.byteOffset.toString(16);return"0x00000000".substr(0,10-a.length)+a}});return a}();
(function(){function a(a,b,c){return a.subarray(b,c||a.length)}function b(a,b,c){var d=a.constructor;c=c||a.length;return new d(a.buffer,a.byteOffset+b*d.BYTES_PER_ELEMENT,c-b)}function c(){var a=new GLM.$outer.Float32Array([0,0]);a.subarray(1).subarray(0)[0]=1;var b=c.result=[a[1],(new GLM.$outer.Float32Array(16)).subarray(12,16).length];return!(a[1]!==b[0]||4!==b[1])}function d(a){var b=new GLM.$outer.Float32Array([0,0]);a(a(b,1),0)[0]=1;a=d.result=[b[1],a(new GLM.$outer.Float32Array(16),12,16).length];
return!(b[1]!==a[0]||4!==a[1])}Object.defineProperty(GLM,"patch_subarray",{configurable:!0,value:function(){var e=!c()?b:a;e.workaround_broken_spidermonkey_subarray=b;e.native_subarray=a;if(!d(e))throw Error("failed to resolve working TypedArray.subarray implementation... "+d.result);return e}})})();GLM.$subarray=GLM.patch_subarray();
var GLM_template=GLM.$template={_genArgError:function(a,b,c,d){~d.indexOf(void 0)&&(d=d.slice(0,d.indexOf(void 0)));var e=RegExp.prototype.test.bind(/^[^$_]/);return new GLM.GLMJSError("unsupported argtype to "+b+" "+a.$sig+": [typ="+c+"] :: got arg types: "+d.map(GLM.$template.jstypes.get)+" // supported types: "+Object.keys(a).filter(e).join("||"))},jstypes:{get:function(a){return null===a?"null":void 0===a?"undefined":a.$type||GLM.$template.jstypes[typeof a]||GLM.$template.jstypes[a+""]||function(a){if("object"===
typeof a){if(a instanceof GLM.$outer.Float32Array)return"Float32Array";if(a instanceof GLM.$outer.ArrayBuffer)return"ArrayBuffer";if(Array.isArray(a))return"array"}return"<unknown "+[typeof a,a]+">"}(a)},"0":"float","boolean":"bool",number:"float",string:"string","[object Float32Array]":"Float32Array","[object ArrayBuffer]":"ArrayBuffer","function":"function"},_add_overrides:function(a,b){for(var c in b)b[c]&&GLM[c].override(a,b[c])},_add_inline_override:function(a,b,c){this[b]=eval(GLM.$template._traceable("glm_"+
a+"_"+b,c))();return this},_inline_helpers:function(a,b){Object.defineProperty(a,"GLM",{value:GLM});return{$type:"built-in",$type_name:b,$template:a,F:a,dbg:b,override:this._add_inline_override.bind(a,b),link:function(c){var d=a[c];d||(d=a[[c,"undefined"]]);if(!d)throw new GLM.GLMJSError("error linking direct function for "+b+"<"+c+"> or "+b+"<"+[c,void 0]+">");return/\bthis[\[.]/.test(d+"")?d.bind(a):d}}},"template<T>":function(a,b){a.$sig="template<T>";var c=GLM.$template.jstypes,d=GLM.$template._genArgError,
e=GLM.$GLMBaseType;return this.slingshot(this._inline_helpers(a,b),eval(this._traceable("Tglm_"+b,function(b){this instanceof e&&(b=this);var g=[b&&b.$type||c[typeof b]||c.get(b)||"null"];if(!a[g])throw d(a,arguments.callee.dbg,g,[b]);return a[g](b)}))())},"template<T,...>":function(a,b){a.$sig="template<T,...>";var c=GLM.$template.jstypes,d=GLM.$template._genArgError,e=GLM.$GLMBaseType;return this.slingshot(this._inline_helpers(a,b),eval(this._traceable("Tdotglm_"+b,function(b){for(var g=Array(arguments.length),
h=0;h<g.length;h++)g[h]=arguments[h];this instanceof e&&g.unshift(b=this);h=[b&&b.$type||c[typeof b]||c.get(b)||"null"];if(!a[h])throw d(a,arguments.callee.dbg,h,g);return a[h].apply(a,g)}))())},"template<T,V,number>":function(a,b){a.$sig="template<T,V,number>";var c=GLM.$template.jstypes,d=GLM.$template._genArgError,e=GLM.GLMJSError,f=GLM.$GLMBaseType;return this.slingshot(this._inline_helpers(a,b),eval(this._traceable("TVnglm_"+b,function(){for(var b=Array(arguments.length),h=0;h<b.length;h++)b[h]=
arguments[h];this instanceof f&&b.unshift(this);var h=b[0],i=b[1],b=b[2],j=[h&&h.$type||c[typeof h]||c[h+""]||"<unknown "+h+">",i&&i.$type||c[typeof i]||c[i+""]||"<unknown "+i+">"];if(!a[j])throw d(a,arguments.callee.dbg,j,[h,i,b]);if("number"!==typeof b)throw new e(arguments.callee.dbg+a.$sig+": unsupported n type: "+[typeof b,b]);return a[j](h,i,b)}))())},"template<T,V,...>":function(a,b){a.$sig="template<T,V,...>";var c=GLM.$template.jstypes,d=GLM.$GLMBaseType,e=GLM.$template._genArgError,f=GLM.$outer.Array;
return this.slingshot(this._inline_helpers(a,b),eval(this._traceable("TVglm_"+b,function(){for(var b=new f(arguments.length),h=0;h<b.length;h++)b[h]=arguments[h];this instanceof d&&b.unshift(this);var h=b[0],i=b[1],h=[h&&h.$type||c[typeof h],i&&i.$type||c[typeof i]||c[i+""]||f.isArray(i)&&"array"+i.length+""||""+i+""];if(!a[h])throw e(a,arguments.callee.dbg,h,b);return a[h].apply(a,b)}))())},override:function(a,b,c,d,e){function f(a,c){GLM.$outer.console.debug("glm.$template.override: "+b+" ... "+
Object.keys(a.$template).filter(function(a){return!~a.indexOf("$")}).map(function(a){return!~c.indexOf(a)?"*"+a+"*":a}).join(" | "))}GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: ",a,b,c.$op?'$op: ["'+c.$op+'"]':"");if(!d)throw Error("unspecified target group "+d+' (expected override(<TV>, "p", {TSP}, ret={GROUP}))');var g=d[b];if(g&&g.$op!==c.$op)throw Error('glm.$template.override: mismatch merging existing override: .$op "'+[g.$op,"!=",c.$op].join(" ")+'"  p='+[b,g.$op,c.$op,"||"+
Object.keys(g.$template).join("||")]);var h=GLM.$template[a](GLM.$template.deNify(c,b),b);if(g&&g.F.$sig!==h.F.$sig)throw Error('glm.$template.override: mismatch merging existing override: .$sig "'+[g&&g.F.$sig,"!=",h.F.$sig].join(" ")+'"  p='+[b,g&&g.F.$sig,h.F.$sig,"||"+Object.keys(g&&g.$template||{}).join("||")]);h.$op=c.$op;if(g){for(var i in h.$template)"$op"===i||"$sig"===i||(a=i in g.$template,!a||!0===e?(GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: "+b+" ... "+i+" merged"),
g.$template[i]=h.$template[i]):a&&GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: "+b+" ... "+i+" skipped"));if(GLM.$DEBUG){var j=[];Object.keys(g.$template).forEach(function(a){a in h.$template||(GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: "+b+" ... "+a+" carried-forward"),j.push(a))});f(d[b],j)}}else d[b]=h,GLM.$DEBUG&&f(d[b],[]);return d},_override:function(a,b,c){for(var d in b){if("mat4_scale"!==d&&"object"!==typeof b[d])throw new GLM.GLMJSError("expect object property overrides"+
[d,b[d],Object.keys(c)]);"object"===typeof b[d]?this.override(a,d,b[d],c,!0):ret_scale=5}return c},slingshot:function(){return this.extend.apply(this,[].reverse.call(arguments))},extend:function(a,b){[].slice.call(arguments,1).forEach(function(b){if(b)for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])});return a},"declare<T,V,...>":function(a){return!a?{}:this._override("template<T,V,...>",a,GLM.$outer.functions)},"declare<T>":function(a){return!a?{}:this._override("template<T>",a,GLM.$outer.functions)},
"declare<T,...>":function(a){return!a?{}:this._override("template<T,...>",a,GLM.$outer.functions)},"declare<T,V,number>":function(a){return!a?{}:this._override("template<T,V,number>",a,GLM.$outer.functions)},_tojsname:function(a){return(a||"_").replace(/[^$a-zA-Z0-9_]/g,"_")},_traceable:function(a,b){var c=b;if("function"!==typeof c)throw new GLM.GLMJSError("_traceable expects tidy function as second arg "+c);if(!a)throw new GLM.GLMJSError("_traceable expects hint or what's the point"+[c,a]);a=this._tojsname(a||
"_traceable");c=c.toString().replace(/^(\s*var\s*(\w+)\s*=\s*)__VA_ARGS__;/mg,function(a,b,c){return b+"new Array(arguments.length);for(var I=0;I<varname.length;I++)varname[I]=arguments[I];".replace(/I/g,"__VA_ARGS__I").replace(/varname/g,c)}).replace(/\barguments[.]callee\b/g,a);if(/^function _traceable/.test(c))throw new GLM.GLMJSError("already wrapped in a _traceable: "+[c,a]);c='function _traceable(){ "use strict"; SRC; return HINT; }'.replace("HINT",a.replace(/[$]/g,"$$$$")).replace("SRC",c.replace(/[$]/g,
"$$$$").replace(/^function\s*\(/,"function "+a+"("));c="1,"+c;if(GLM.$DEBUG)try{eval(c)}catch(d){throw console.error("_traceable error",a,c,b,d),d;}return c},deNify:function(a,b){var c={vec:[2,3,4],mat:[3,4]},d=this._tojsname.bind(this),e;for(e in a){var f=!1;e.replace(/([vV]ec|[mM]at)(?:\w*)<N>/,function(g,h){f=!0;var i=a[e];delete a[e];c[h.toLowerCase()].forEach(function(c){var f=e.replace(/<N[*]N>/g,c*c).replace(/<N>/g,c);if(!(f in a)){var g=d("glm_"+b+"_"+f);a[f]=eval("'use strict'; 1,"+(i+"").replace(/^function\s*\(/,
"function "+g+"(").replace(/N[*]N/g,c*c).replace(/N/g,c))}})}.bind(this));/^[$]/.test(e)?GLM.$DEBUG&&GLM.$outer.console.debug("@ NOT naming "+e):!f&&("function"===typeof a[e]&&!a[e].name)&&(GLM.$DEBUG&&GLM.$outer.console.debug("naming "+d(b+"_"+e)),a[e]=eval(this._traceable("glm_"+b+"_"+e,a[e]))())}return a},$_module_stamp:+new Date,_iso:"/[*][^/*]*[*]/",_get_argnames:function(a){return(a+"").replace(/\s+/g,"").replace(RegExp(this._iso,"g"),"").split("){",1)[0].replace(/^[^(]*[(]/,"").replace(/=[^,]+/g,
"").split(",").filter(Boolean)},_fix_$_names:function(a,b){Object.keys(b).filter(function(a){return"function"===typeof b[a]&&!b[a].name}).map(function(c){var d=a+"_"+c;GLM.$DEBUG&&GLM.$outer.console.debug("naming $."+c+" == "+d,this._traceable(d,b[c]));b[c]=eval(this._traceable("glm_"+d,b[c]))()}.bind(this));return b},_typedArrayMaker:function(a,b){return function(c){if(c.length===a)return new b(c);var d=new b(a);d.set(c);return d}},GLMType:function(a,b){var c=this._fix_$_names(a,b),d=c.identity.length,
e,f=Object,g=GLM.$template._get_argnames.bind(GLM.$template),h=GLM.GLMJSError,i={},j;for(j in c)"function"===typeof c[j]&&function(a){i[j]=function(b){return a.apply(c,b)}}(c[j]);e=function(b){var d=i[typeof b[0]+b.length];if(!d){var e="glm."+a;b=e+"("+b.map(function(a){return typeof a})+")";d=f.keys(c).filter(function(a){return"function"===typeof c[a]&&/^\w+\d+$/.test(a)}).map(function(a){return e+"("+g(c[a])+")"});throw new h("no constructor found for: "+b+"\nsupported signatures:\n\t"+d.join("\n\t"));
}return d};var k,l=GLM;GLM.$template._get_argnames.bind(GLM.$template);k=function(b,c){2<l.$DEBUG&&l.$outer.console.info("adopting elements...",typeof b);if(b.length!=d){if(!1===c)return c;l.$outer.console.error(a+" elements size mismatch: "+["wanted:"+d,"handed:"+b.length]);var e=l.$subarray(b,0,d);throw new l.GLMJSError(a+" elements size mismatch: "+["wanted:"+d,"handed:"+b.length,"theoreticaly-correctable?:"+(e.length===d)]);}return b};var m=this._typedArrayMaker(d,GLM.$outer.Float32Array),q,r=
GLM.$outer;q=function(a){return a instanceof r.Float32Array};var n=function(a,b,c,f,g,h,i,j){return eval(j("glm_"+g+"$class",function(c){for(var f=new a(arguments.length),g=0;g<f.length;g++)f[g]=arguments[g];var h=e(f),g=n;if(this instanceof g)f=q(c)?k(c):m(h(f)),b.defineProperty(this,"elements",{enumerable:!1,configurable:!0,value:f});else return f=q(c)&&c.length===d?m(c):h(f),new g(f)}))()}(Array,Object,GLM,c,a,GLM.$template._get_argnames.bind(GLM.$template),GLM.GLMJSError,GLM.$template._traceable.bind(GLM.$template));
c.components=c.components?c.components.map(function(a){return"string"===typeof a?a.split(""):a}):[];n.$=c;n.componentLength=d;n.BYTES_PER_ELEMENT=d*GLM.$outer.Float32Array.BYTES_PER_ELEMENT;n.prototype=new GLM.$GLMBaseType(n,a);n.toJSON=function(){var b={glm$type:a,glm$class:n.prototype.$type_name,glm$eg:(new n).object},c;for(c in n)/function |^[$]/.test(c+n[c])||(b[c]=n[c]);return b};return n}};
GLM.$template["declare<T,V,...>"]({cross:{"vec2,vec2":function(a,b){return this.GLM.vec3(0,0,a.x*b.y-a.y*b.x)}},distance:{"vec<N>,vec<N>":function(a,b){return this.GLM.length(b.sub(a))}}});
GLM.$template["declare<T,V,number>"]({mix:{"float,float":function(a,b,c){return b*c+a*(1-c)},"vec<N>,vec<N>":function(a,b,c){var d=1-c,e=new this.GLM.vecN(new a.elements.constructor(N)),f=e.elements;a=a.elements;b=b.elements;for(var g=0;g<N;g++)f[g]=b[g]*c+a[g]*d;return e}},clamp:{"float,float":function(a,b,c){return GLM._clamp(a,b,c)},"vec<N>,float":function(a,b,c){return new GLM.vecN(GLM.$to_array(a).map(function(a){return GLM._clamp(a,b,c)}))}},epsilonEqual:{"float,float":GLM._epsilonEqual,"vec<N>,vec<N>":function(a,
b,c){for(var d=this["float,float"],e=glm.bvecN(),f=0;f<N;f++)e[f]=d(a[f],b[f],c);return e},"ivec<N>,ivec<N>":function(a,b,c){return this["vecN,vecN"](a,b,c)},"uvec<N>,uvec<N>":function(a,b,c){return this["vecN,vecN"](a,b,c)},"quat,quat":function(a,b,c){for(var d=this["float,float"],e=glm.bvec4(),f=0;4>f;f++)e[f]=d(a[f],b[f],c);return e},"mat<N>,mat<N>":function(){throw new GLM.GLMJSError("error: 'epsilonEqual' only accept floating-point and integer scalar or vector inputs");}}});
GLM.$template.extend(GLM,GLM.$template["declare<T>"]({degrees:{"float":function(a){return this.GLM._degrees(a)},"vec<N>":function(a){return new this.GLM.vecN(this.GLM.$to_array(a).map(this.GLM._degrees))}},radians:{"float":function(a){return this.GLM._radians(a)},"vec<N>":function(a){return new this.GLM.vecN(this.GLM.$to_array(a).map(this.GLM._radians))}},sign:{"null":function(){return 0},undefined:function(){return NaN},string:function(){return NaN},"float":function(a){return GLM._sign(a)},"vec<N>":function(a){return new GLM.vecN(GLM.$to_array(a).map(GLM._sign))},
"ivec<N>":function(a){return new GLM.ivecN(GLM.$to_array(a).map(GLM._sign))}},abs:{"float":function(a){return GLM._abs(a)},"vec<N>":function(a){return new GLM.vecN(GLM.$to_array(a).map(GLM._abs))}},fract:{"float":function(a){return GLM._fract(a)},"vec<N>":function(a){return new GLM.vecN(GLM.$to_array(a).map(GLM._fract))}},all:{"vec<N>":function(a){return N===GLM.$to_array(a).filter(Boolean).length},"bvec<N>":function(a){return N===GLM.$to_array(a).filter(Boolean).length},"ivec<N>":function(a){return N===
GLM.$to_array(a).filter(Boolean).length},"uvec<N>":function(a){return N===GLM.$to_array(a).filter(Boolean).length},quat:function(a){return 4===GLM.$to_array(a).filter(Boolean).length}},$to_object:{vec2:function(a){return{x:a.x,y:a.y}},vec3:function(a){return{x:a.x,y:a.y,z:a.z}},vec4:function(a){return{x:a.x,y:a.y,z:a.z,w:a.w}},uvec2:function(a){return{x:a.x,y:a.y}},uvec3:function(a){return{x:a.x,y:a.y,z:a.z}},uvec4:function(a){return{x:a.x,y:a.y,z:a.z,w:a.w}},ivec2:function(a){return{x:a.x,y:a.y}},
ivec3:function(a){return{x:a.x,y:a.y,z:a.z}},ivec4:function(a){return{x:a.x,y:a.y,z:a.z,w:a.w}},bvec2:function(a){return{x:!!a.x,y:!!a.y}},bvec3:function(a){return{x:!!a.x,y:!!a.y,z:!!a.z}},bvec4:function(a){return{x:!!a.x,y:!!a.y,z:!!a.z,w:!!a.w}},quat:function(a){return{w:a.w,x:a.x,y:a.y,z:a.z}},mat3:function(a){return{"0":this.vec3(a[0]),1:this.vec3(a[1]),2:this.vec3(a[2])}},mat4:function(a){return{"0":this.vec4(a[0]),1:this.vec4(a[1]),2:this.vec4(a[2]),3:this.vec4(a[3])}}},roll:{$atan2:Math.atan2,
quat:function(a){return this.$atan2(2*(a.x*a.y+a.w*a.z),a.w*a.w+a.x*a.x-a.y*a.y-a.z*a.z)}},pitch:{$atan2:Math.atan2,quat:function(a){return this.$atan2(2*(a.y*a.z+a.w*a.x),a.w*a.w-a.x*a.x-a.y*a.y+a.z*a.z)}},yaw:{$asin:Math.asin,quat:function(a){return this.$asin(this.GLM.clamp(-2*(a.x*a.z-a.w*a.y),-1,1))}},eulerAngles:{quat:function(a){return this.GLM.vec3(this.GLM.pitch(a),this.GLM.yaw(a),this.GLM.roll(a))}}}),GLM.$template["declare<T,...>"]({$from_glsl:{string:function(a,b){var c;a.replace(/^([$\w]+)\(([-.0-9ef, ]+)\)$/,
function(a,e,f){a=glm[e]||glm["$"+e];if(!a)throw new GLM.GLMJSError("glsl decoding issue: unknown type '"+e+"'");c=f.split(",").map(parseFloat);if(!b||b===a)c=a.apply(glm,c);else{if(!0===b||b===Array){for(;c.length<a.componentLength;)c.push(c[c.length-1]);return c}throw new GLM.GLMJSError("glsl decoding issue: second argument expected to be undefined|true|Array");}});return c}},$to_glsl:{"vec<N>":function(a,b){var c=GLM.$to_array(a);b&&("object"===typeof b&&"precision"in b)&&(c=c.map(function(a){return a.toFixed(b.precision)}));
for(;c.length&&c[c.length-2]===c[c.length-1];)c.pop();return a.$type+"("+c+")"},"uvec<N>":function(a,b){return this.vecN(a,b)},"ivec<N>":function(a,b){return this.vecN(a,b)},"bvec<N>":function(a,b){return this.vecN(a,b)},quat:function(a,b){var c;b&&("object"===typeof b&&"precision"in b)&&(c=b.precision);return 0===a.x+a.y+a.z?"quat("+(void 0===c?a.w:a.w.toFixed(c))+")":this.vec4(a,b)},"mat<N>":function(a,b){var c;b&&("object"===typeof b&&"precision"in b)&&(c=b.precision);var d=GLM.$to_array(a);void 0!==
c&&(d=d.map(function(a){return a.toFixed(c)}));return d.reduce(function(a,b){return a+1*b},0)===d[0]*N?"matN("+d[0]+")":"matN("+d+")"}},frexp:{"float":function(a,b){return 1===arguments.length?this["float,undefined"](a):this["float,array"](a,b)},"vec<N>":function(a,b){if(2>arguments.length)throw new GLM.GLMJSError("frexp(vecN, ivecN) expected ivecN as second parameter");return GLM.vecN(GLM.$to_array(a).map(function(a,d){var e=GLM._frexp(a);b[d]=e[1];return e[0]}))},"float,undefined":function(a){return GLM._frexp(a)},
"float,array":function(a,b){return GLM._frexp(a,b)}},ldexp:{"float":GLM._ldexp,"vec<N>":function(a,b){return GLM.vecN(GLM.$to_array(a).map(function(a,d){return GLM._ldexp(a,b[d])}))}}}));
GLM.$template["declare<T,V,...>"]({rotate:{"float,vec3":function(a,b){return this.GLM.$outer.mat4_angleAxis(a,b)},"mat4,float":function(a,b,c){return a.mul(this.GLM.$outer.mat4_angleAxis(b,c))}},scale:{$outer:GLM.$outer,"mat4,vec3":function(a,b){return a.mul(this.$outer.mat4_scale(b))},"vec3,undefined":function(a){return this.$outer.mat4_scale(a)}},translate:{"mat4,vec3":function(a,b){return a.mul(this.GLM.$outer.mat4_translation(b))},"vec3,undefined":function(a){return this.GLM.$outer.mat4_translation(a)}},
angleAxis:{"float,vec3":function(a,b){return this.GLM.$outer.quat_angleAxis(a,b)}},min:{"float,float":function(a,b){return this.GLM._min(a,b)},"vec<N>,float":function(a,b){return new this.GLM.vecN(this.GLM.$to_array(a).map(function(a){return this.GLM._min(a,b)}.bind(this)))}},max:{"float,float":function(a,b){return this.GLM._max(a,b)},"vec<N>,float":function(a,b){return new this.GLM.vecN(this.GLM.$to_array(a).map(function(a){return this.GLM._max(a,b)}.bind(this)))}},equal:{"float,float":GLM._equal,
"vec<N>,vec<N>":function(a,b){for(var c=this["float,float"],d=glm.bvecN(),e=0;e<N;e++)d[e]=c(a[e],b[e]);return d},"bvec<N>,bvec<N>":function(a,b){return this["vecN,vecN"](a,b)},"ivec<N>,ivec<N>":function(a,b){return this["vecN,vecN"](a,b)},"uvec<N>,uvec<N>":function(a,b){return this["vecN,vecN"](a,b)},"quat,quat":function(a,b){for(var c=this["float,float"],d=glm.bvec4(),e=0;4>e;e++)d[e]=c(a[e],b[e]);return d}},_slerp:{"quat,quat":function(a,b,c){var d=b,e=glm.dot(glm.vec4(a),glm.vec4(b));0>e&&(d=
b.mul(-1),e=-e);if(e>1-glm.epsilon())return glm.quat(glm.mix(a.w,d.w,c),glm.mix(a.x,d.x,c),glm.mix(a.y,d.y,c),glm.mix(a.z,d.z,c));b=Math.acos(e);return(a.mul(Math.sin((1-c)*b))+d.mul(Math.sin(c*b)))/Math.sin(b)}},rotation:{"vec3,vec3":function(a,b){var c=this.$dot(a,b),d=new a.constructor(new a.elements.constructor(3));if(c>=1-this.$epsilon)return this.$quat();if(c<-1+this.$epsilon)return d=this.$cross(this.$m[2],a),this.$length2(d)<this.$epsilon&&(d=this.$cross(this.$m[0],a)),d=this.$normalize(d),
this.$angleAxis(this.$pi,d);var d=this.$cross(a,b),c=this.$sqrt(2*(1+c)),e=1/c;return this.$quat(0.5*c,d.x*e,d.y*e,d.z*e)}},project:{"vec3,mat4":function(a,b,c,d){a=glm.vec4(a,1);a=b["*"](a);a=c["*"](a);a["/="](a.w);a=a["*"](0.5)["+"](0.5);a[0]=a[0]*d[2]+d[0];a[1]=a[1]*d[3]+d[1];return glm.vec3(a)}},unProject:{"vec3,mat4":function(a,b,c,d){b=glm.inverse(c["*"](b));a=glm.vec4(a,1);a.x=(a.x-d[0])/d[2];a.y=(a.y-d[1])/d[3];a=a["*"](2)["-"](glm.vec4(1));d=b["*"](a);d["/="](d.w);return glm.vec3(d)}},orientedAngle:{"vec3,vec3":function(a,
b,c){var d=Math.acos(glm.clamp(glm.dot(a,b),0,1));return glm.mix(d,-d,0>glm.dot(c,glm.cross(a,b))?1:0)}}});
GLM.$to_string=GLM.$template["declare<T,...>"]({$to_string:{"function":function(a){return"[function "+(a.name||"anonymous")+"]"},ArrayBuffer:function(a){return"[object ArrayBuffer "+JSON.stringify({byteLength:a.byteLength})+"]"},Float32Array:function(a){return"[object Float32Array "+JSON.stringify({length:a.length,byteOffset:a.byteOffset,byteLength:a.byteLength,BPE:a.BYTES_PER_ELEMENT})+"]"},"float":function(a,b){return GLM.$toFixedString("float",{value:a},["value"],b&&b.precision)},string:function(a){return a},
bool:function(a){return"bool("+a+")"},"vec<N>":function(a,b){return GLM.$toFixedString(a.$type_name,a,a.$components,b&&b.precision)},"uvec<N>":function(a,b){return GLM.$toFixedString(a.$type_name,a,a.$components,b&&"object"===typeof b&&b.precision||0)},"ivec<N>":function(a,b){return GLM.$toFixedString(a.$type_name,a,a.$components,b&&"object"===typeof b&&b.precision||0)},"bvec<N>":function(a){return a.$type_name+"("+GLM.$to_array(a).map(Boolean).join(", ")+")"},"mat<N>":function(a,b){var c=[0,1,2,
3].slice(0,N).map(function(b){return a[b]}).map(function(a){return GLM.$toFixedString("\t",a,a.$components,b&&b.precision)});return a.$type_name+"(\n"+c.join(", \n")+"\n)"},quat:function(a,b){a=GLM.degrees(GLM.eulerAngles(a));return GLM.$toFixedString("<quat>"+a.$type_name,a,["x","y","z"],b&&b.precision)}}}).$to_string;
GLM.$template["declare<T,V,...>"]({copy:{$op:"=","vec<N>,vec<N>":function(a,b){a.elements.set(b.elements);return a},"vec<N>,array<N>":function(a,b){a.elements.set(b);return a},"vec<N>,uvec<N>":function(a,b){a.elements.set(b.elements);return a},"vec<N>,ivec<N>":function(a,b){a.elements.set(b.elements);return a},"vec<N>,bvec<N>":function(a,b){a.elements.set(b.elements);return a},"uvec<N>,uvec<N>":function(a,b){a.elements.set(b.elements);return a},"uvec<N>,array<N>":function(a,b){a.elements.set(b);return a},
"uvec<N>,vec<N>":function(a,b){a.elements.set(b.elements);return a},"uvec<N>,ivec<N>":function(a,b){a.elements.set(b.elements);return a},"uvec<N>,bvec<N>":function(a,b){a.elements.set(b.elements);return a},"ivec<N>,ivec<N>":function(a,b){a.elements.set(b.elements);return a},"ivec<N>,array<N>":function(a,b){a.elements.set(b);return a},"ivec<N>,vec<N>":function(a,b){a.elements.set(b.elements);return a},"ivec<N>,uvec<N>":function(a,b){a.elements.set(b.elements);return a},"ivec<N>,bvec<N>":function(a,
b){a.elements.set(b.elements);return a},"bvec<N>,ivec<N>":function(a,b){a.elements.set(b.elements);return a},"bvec<N>,array<N>":function(a,b){a.elements.set(b);return a},"bvec<N>,vec<N>":function(a,b){a.elements.set(b.elements);return a},"bvec<N>,uvec<N>":function(a,b){a.elements.set(b.elements);return a},"bvec<N>,bvec<N>":function(a,b){a.elements.set(b.elements);return a},"quat,quat":function(a,b){a.elements.set(b.elements);return a},"mat<N>,mat<N>":function(a,b){a.elements.set(b.elements);return a},
"mat<N>,array<N>":function(a,b){b=b.reduce(function(a,b){if(!a.concat)throw new GLM.GLMJSError("matN,arrayN -- [[.length===4] x 4] expected");return a.concat(b)});if(b===N)throw new GLM.GLMJSError("matN,arrayN -- [[N],[N],[N],[N]] expected");return a["="](b)},"mat<N>,array<N*N>":function(a,b){a.elements.set(b);return a},"mat4,array9":function(a,b){a.elements.set((new GLM.mat4(b)).elements);return a}},sub:{$op:"-",_sub:function(a,b){return this.GLM.$to_array(a).map(function(a,d){return a-b[d]})},"vec<N>,vec<N>":function(a,
b){return new this.GLM.vecN(this._sub(a,b))},"vec<N>,uvec<N>":function(a,b){return new this.GLM.vecN(this._sub(a,b))},"uvec<N>,uvec<N>":function(a,b){return new this.GLM.uvecN(this._sub(a,b))},"uvec<N>,ivec<N>":function(a,b){return new this.GLM.uvecN(this._sub(a,b))},"vec<N>,ivec<N>":function(a,b){return new this.GLM.vecN(this._sub(a,b))},"ivec<N>,uvec<N>":function(a,b){return new this.GLM.ivecN(this._sub(a,b))},"ivec<N>,ivec<N>":function(a,b){return new this.GLM.ivecN(this._sub(a,b))}},sub_eq:{$op:"-=",
"vec<N>,vec<N>":function(a,b){for(var c=a.elements,d=b.elements,e=0;e<N;e++)c[e]-=d[e];return a},"vec<N>,uvec<N>":function(a,b){return this["vecN,vecN"](a,b)},"uvec<N>,uvec<N>":function(a,b){return this["vecN,vecN"](a,b)},"uvec<N>,ivec<N>":function(a,b){return this["vecN,vecN"](a,b)},"vec<N>,ivec<N>":function(a,b){return this["vecN,vecN"](a,b)},"ivec<N>,ivec<N>":function(a,b){return this["vecN,vecN"](a,b)},"ivec<N>,uvec<N>":function(a,b){return this["vecN,vecN"](a,b)}},add:{$op:"+",_add:function(a,
b){return this.GLM.$to_array(a).map(function(a,d){return a+b[d]})},"vec<N>,float":function(a,b){return new this.GLM.vecN(this._add(a,[b,b,b,b]))},"vec<N>,vec<N>":function(a,b){return new this.GLM.vecN(this._add(a,b))},"vec<N>,uvec<N>":function(a,b){return new this.GLM.vecN(this._add(a,b))},"uvec<N>,uvec<N>":function(a,b){return new this.GLM.uvecN(this._add(a,b))},"uvec<N>,ivec<N>":function(a,b){return new this.GLM.uvecN(this._add(a,b))},"vec<N>,ivec<N>":function(a,b){return new this.GLM.vecN(this._add(a,
b))},"ivec<N>,ivec<N>":function(a,b){return new this.GLM.ivecN(this._add(a,b))},"ivec<N>,uvec<N>":function(a,b){return new this.GLM.ivecN(this._add(a,b))}},add_eq:{$op:"+=","vec<N>,vec<N>":function(a,b){for(var c=a.elements,d=b.elements,e=0;e<N;e++)c[e]+=d[e];return a},"vec<N>,uvec<N>":function(a,b){return this["vecN,vecN"](a,b)},"uvec<N>,uvec<N>":function(a,b){return this["vecN,vecN"](a,b)},"uvec<N>,ivec<N>":function(a,b){return this["vecN,vecN"](a,b)},"vec<N>,ivec<N>":function(a,b){return this["vecN,vecN"](a,
b)},"ivec<N>,ivec<N>":function(a,b){return this["vecN,vecN"](a,b)},"ivec<N>,uvec<N>":function(a,b){return this["vecN,vecN"](a,b)}},div:{$op:"/","vec<N>,float":function(a,b){return new this.GLM.vecN(this.GLM.$to_array(a).map(function(a){return a/b}))}},div_eq:{$op:"/=","vec<N>,float":function(a,b){for(var c=0;c<N;c++)a.elements[c]/=b;return a}},mul:{$op:"*","vec<N>,vec<N>":function(a,b){return new this.GLM.vecN(this.GLM.$to_array(a).map(function(a,d){return a*b[d]}))}},eql_epsilon:function(a){return{$op:"~=",
"vec<N>,vec<N>":a,"mat<N>,mat<N>":a,"quat,quat":a,"uvec<N>,uvec<N>":a,"ivec<N>,ivec<N>":a}}(function(a,b){return this.GLM.all(this.GLM.epsilonEqual(a,b,this.GLM.epsilon()))}),eql:function(a){return{$op:"==","mat<N>,mat<N>":function(a,c){return c.elements.length===glm.$to_array(a).filter(function(a,b){return a===c.elements[b]}).length},"vec<N>,vec<N>":a,"quat,quat":a,"uvec<N>,uvec<N>":a,"ivec<N>,ivec<N>":a,"bvec<N>,bvec<N>":a}}(function(a,b){return GLM.all(GLM.equal(a,b))})});
GLM.string={$type_name:"string",$:{}};GLM.number={$type_name:"float",$:{}};GLM["boolean"]={$type:"bool",$type_name:"bool",$:{}};
GLM.vec2=GLM.$template.GLMType("vec2",{name:"fvec2",identity:[0,0],components:["xy","01"],undefined0:function(){return this.identity},number1:function(a){return[a,a]},number2:function(a,b){return[a,b]},object1:function(a){if(null!==a)switch(a.length){case 4:case 3:case 2:return[a[0],a[1]];default:if("y"in a&&"x"in a){if(typeof a.x!==typeof a.y)throw new GLM.GLMJSError("unrecognized .x-ish object passed to GLM.vec2: "+a);return"string"===typeof a.x?[1*a.x,1*a.y]:[a.x,a.y]}}throw new GLM.GLMJSError("unrecognized object passed to GLM.vec2: "+
a);}});
GLM.uvec2=GLM.$template.GLMType("uvec2",{name:"uvec2",identity:[0,0],components:["xy","01"],_clamp:function(a){return~~a},undefined0:function(){return this.identity},number1:function(a){a=this._clamp(a);return[a,a]},number2:function(a,b){a=this._clamp(a);b=this._clamp(b);return[a,b]},object1:function(a){switch(a.length){case 4:case 3:case 2:return[a[0],a[1]].map(this._clamp);default:if("y"in a&&"x"in a){if(typeof a.x!==typeof a.y)throw new GLM.GLMJSError("unrecognized .x-ish object passed to GLM."+this.name+
": "+a);return[a.x,a.y].map(this._clamp)}}throw new GLM.GLMJSError("unrecognized object passed to GLM."+this.name+": "+a);}});
GLM.vec3=GLM.$template.GLMType("vec3",{name:"fvec3",identity:[0,0,0],components:["xyz","012","rgb"],undefined0:function(){return GLM.vec3.$.identity},number1:function(a){return[a,a,a]},number2:function(a,b){return[a,b,b]},number3:function(a,b,c){return[a,b,c]},Error:GLM.GLMJSError,object1:function(a){if(a)switch(a.length){case 4:case 3:return[a[0],a[1],a[2]];case 2:return[a[0],a[1],a[1]];default:if("z"in a&&"x"in a){if(typeof a.x!==typeof a.y)throw new this.Error("unrecognized .x-ish object passed to GLM.vec3: "+
a);return"string"===typeof a.x?[1*a.x,1*a.y,1*a.z]:[a.x,a.y,a.z]}}throw new this.Error("unrecognized object passed to GLM.vec3: "+a);},object2:function(a,b){if(a instanceof GLM.vec2||a instanceof GLM.uvec2||a instanceof GLM.ivec2||a instanceof GLM.bvec2)return[a.x,a.y,b];throw new GLM.GLMJSError("unrecognized object passed to GLM.vec3(o,z): "+[a,b]);}});
GLM.uvec3=GLM.$template.GLMType("uvec3",{name:"uvec3",identity:[0,0,0],components:["xyz","012"],_clamp:GLM.uvec2.$._clamp,undefined0:function(){return this.identity},number1:function(a){a=this._clamp(a);return[a,a,a]},number2:function(a,b){a=this._clamp(a);b=this._clamp(b);return[a,b,b]},number3:function(a,b,c){a=this._clamp(a);b=this._clamp(b);c=this._clamp(c);return[a,b,c]},object1:function(a){if(a)switch(a.length){case 4:case 3:return[a[0],a[1],a[2]].map(this._clamp);case 2:return[a[0],a[1],a[1]].map(this._clamp);
default:if("z"in a&&"x"in a){if(typeof a.x!==typeof a.y)throw new GLM.GLMJSError("unrecognized .x-ish object passed to GLM."+this.name+": "+a);return[a.x,a.y,a.z].map(this._clamp)}}throw new GLM.GLMJSError("unrecognized object passed to GLM."+this.name+": "+a);},object2:function(a,b){if(a instanceof GLM.vec2)return[a.x,a.y,b].map(this._clamp);if(a instanceof GLM.uvec2||a instanceof GLM.ivec2||a instanceof GLM.bvec2)return[a.x,a.y,this._clamp(b)];throw new GLM.GLMJSError("unrecognized object passed to GLM."+
this.name+"(o,z): "+[a,b]);}});
GLM.vec4=GLM.$template.GLMType("vec4",{name:"fvec4",identity:[0,0,0,0],components:["xyzw","0123","rgba"],undefined0:function(){return this.identity},number1:function(a){return[a,a,a,a]},number2:function(a,b){return[a,b,b,b]},number3:function(a,b,c){return[a,b,c,c]},number4:function(a,b,c,d){return[a,b,c,d]},Error:GLM.GLMJSError,object1:function(a){if(a)switch(a.length){case 4:return[a[0],a[1],a[2],a[3]];case 3:return[a[0],a[1],a[2],a[2]];case 2:return[a[0],a[1],a[1],a[1]];default:if("w"in a&&"x"in
a){if(typeof a.x!==typeof a.w)throw new this.Error("unrecognized .x-ish object passed to GLM.vec4: "+a);return"string"===typeof a.x?[1*a.x,1*a.y,1*a.z,1*a.w]:[a.x,a.y,a.z,a.w]}}throw new this.Error("unrecognized object passed to GLM.vec4: "+[a,a&&a.$type]);},$GLM:GLM,object2:function(a,b){if(a instanceof this.$GLM.vec3||a instanceof this.$GLM.uvec3||a instanceof this.$GLM.ivec3||a instanceof this.$GLM.bvec3)return[a.x,a.y,a.z,b];throw new this.$GLM.GLMJSError("unrecognized object passed to GLM.vec4(o,w): "+
[a,b]);},object3:function(a,b,c){if(a instanceof this.$GLM.vec2||a instanceof this.$GLM.uvec2||a instanceof this.$GLM.ivec2||a instanceof this.$GLM.bvec2)return[a.x,a.y,b,c];throw new this.$GLM.GLMJSError("unrecognized object passed to GLM.vec4(o,z,w): "+[a,b,c]);}});
GLM.uvec4=GLM.$template.GLMType("uvec4",{name:"uvec4",identity:[0,0,0,0],components:["xyzw","0123"],_clamp:GLM.uvec2.$._clamp,undefined0:function(){return this.identity},number1:function(a){a=this._clamp(a);return[a,a,a,a]},number2:function(a,b){a=this._clamp(a);b=this._clamp(b);return[a,b,b,b]},number3:function(a,b,c){a=this._clamp(a);b=this._clamp(b);c=this._clamp(c);return[a,b,c,c]},number4:function(a,b,c,d){return[a,b,c,d].map(this._clamp)},Error:GLM.GLMJSError,object1:function(a){if(a)switch(a.length){case 4:return[a[0],
a[1],a[2],a[3]].map(this._clamp);case 3:return[a[0],a[1],a[2],a[2]].map(this._clamp);case 2:return[a[0],a[1],a[1],a[1]].map(this._clamp);default:if("w"in a&&"x"in a){if(typeof a.x!==typeof a.y)throw new this.Error("unrecognized .x-ish object passed to GLM."+this.name+": "+a);return[a.x,a.y,a.z,a.w].map(this._clamp)}}throw new GLM.GLMJSError("unrecognized object passed to GLM."+this.name+": "+[a,a&&a.$type]);},object2:function(a,b){if(a instanceof GLM.vec3)return[a.x,a.y,a.z,b].map(this._clamp);if(a instanceof
GLM.uvec3||a instanceof GLM.ivec3||a instanceof GLM.bvec3)return[a.x,a.y,a.z,this._clamp(b)];throw new GLM.GLMJSError("unrecognized object passed to GLM."+this.name+"(o,w): "+[a,b]);},object3:function(a,b,c){if(a instanceof GLM.vec2)return[a.x,a.y,b,c].map(this._clamp);if(a instanceof GLM.uvec2||a instanceof GLM.ivec2||a instanceof GLM.bvec2)return[a.x,a.y,this._clamp(b),this._clamp(c)];throw new GLM.GLMJSError("unrecognized object passed to GLM."+this.name+"(o,z,w): "+[a,b,c]);}});
GLM.ivec2=GLM.$template.GLMType("ivec2",GLM.$template.extend({},GLM.uvec2.$,{name:"ivec2"}));GLM.ivec3=GLM.$template.GLMType("ivec3",GLM.$template.extend({},GLM.uvec3.$,{name:"ivec3"}));GLM.ivec4=GLM.$template.GLMType("ivec4",GLM.$template.extend({},GLM.uvec4.$,{name:"ivec4"}));GLM.bvec2=GLM.$template.GLMType("bvec2",GLM.$template.extend({},GLM.uvec2.$,{name:"bvec2",boolean1:GLM.uvec2.$.number1,boolean2:GLM.uvec2.$.number2}));
GLM.bvec3=GLM.$template.GLMType("bvec3",GLM.$template.extend({},GLM.uvec3.$,{name:"bvec3",boolean1:GLM.uvec3.$.number1,boolean2:GLM.uvec3.$.number2,boolean3:GLM.uvec3.$.number3}));GLM.bvec4=GLM.$template.GLMType("bvec4",GLM.$template.extend({},GLM.uvec4.$,{name:"bvec4",boolean1:GLM.uvec4.$.number1,boolean2:GLM.uvec4.$.number2,boolean3:GLM.uvec4.$.number3,boolean4:GLM.uvec4.$.number4}));GLM.bvec2.$._clamp=GLM.bvec3.$._clamp=GLM.bvec4.$._clamp=function(a){return!!a};
GLM.mat3=GLM.$template.GLMType("mat3",{name:"mat3x3",identity:[1,0,0,0,1,0,0,0,1],undefined0:function(){return this.identity},number1:function(a){return 1===a?this.identity:[a,0,0,0,a,0,0,0,a]},number9:function(a,b,c,d,e,f,g,h,i){return arguments},Error:GLM.GLMJSError,$vec3:GLM.vec3,object1:function(a){if(a){var b=a.elements||a;if(16===b.length)return[b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]];if(9===b.length)return b;if(0 in b&&1 in b&&2 in b&&!(3 in b)&&"object"===typeof b[2])return[b[0],b[1],
b[2]].map(this.$vec3.$.object1).reduce(function(a,b){return a.concat(b)})}throw new this.Error("unrecognized object passed to GLM.mat3: "+a);},object3:function(a,b,c){return[a,b,c].map(glm.$to_array).reduce(function(a,b){return a.concat(b)})}});
GLM.mat4=GLM.$template.GLMType("mat4",{name:"mat4x4",identity:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],undefined0:function(){return this.identity},number16:function(a,b,c,d,e,f,g,h,i,j,k,l,m,q,r,n){return arguments},number1:function(a){return 1===a?this.identity:[a,0,0,0,0,a,0,0,0,0,a,0,0,0,0,a]},Error:GLM.GLMJSError,$vec4:GLM.vec4,object1:function(a){var b;if(a){b=a.elements||a;if(9===b.length)return[b[0],b[1],b[2],0,b[3],b[4],b[5],0,b[6],b[7],b[8],0,0,0,0,1];if(4===b.length&&b[0]&&4===b[0].length)return b[0].concat(b[1],
b[2],b[3]);if(16===b.length)return b;if(0 in b&&1 in b&&2 in b&&3 in b&&!(4 in b)&&"object"===typeof b[3])return[b[0],b[1],b[2],b[3]].map(this.$vec4.$.object1).reduce(function(a,b){return a.concat(b)})}throw new this.Error("unrecognized object passed to GLM.mat4: "+[a,b&&b.length]);},object4:function(a,b,c,d){return[a,b,c,d].map(glm.$to_array).reduce(function(a,b){return a.concat(b)})}});
GLM.quat=GLM.$template.GLMType("quat",{identity:[0,0,0,1],components:["xyzw","0123"],undefined0:function(){return this.identity},number1:function(a){if(1!==a)throw Error("only quat(1) syntax supported for quat(number1 args)...");return this.identity},number4:function(a,b,c,d){return[b,c,d,a]},$GLM:GLM,$M3:GLM.mat3(),$quat_array_from_zyx:function(a){var b=this.$M3;return this.$GLM.$outer.quat_angleAxis(a.z,b[2]).mul(this.$GLM.$outer.quat_angleAxis(a.y,b[1])).mul(this.$GLM.$outer.quat_angleAxis(a.x,
b[0])).elements},object1:function(a){if(a){if(a instanceof this.$GLM.mat4)return this.$GLM.$outer.quat_array_from_mat4(a);if(4===a.length)return[a[0],a[1],a[2],a[3]];if(a instanceof this.$GLM.quat)return[a.x,a.y,a.z,a.w];if(a instanceof this.$GLM.vec3)return this.$quat_array_from_zyx(a);if("w"in a&&"x"in a)return"string"===typeof a.x?[1*a.x,1*a.y,1*a.z,1*a.w]:[a.x,a.y,a.z,a.w]}throw new this.$GLM.GLMJSError("unrecognized object passed to GLM.quat.object1: "+[a,a&&a.$type,typeof a,a&&a.constructor]);
}});
(function(){var a=function(a,b,c,d){var i={def:function(b,c){this[b]=c;Object.defineProperty(a.prototype,b,c)}};a.$properties=a.$properties||i;var j=a.$properties.def.bind(a.$properties),k=[0,1,2,3].map(function(a){return{enumerable:c,get:function(){return this.elements[a]},set:function(b){this.elements[a]=b}}});b.forEach(function(a,b){j(a,k[b])});if(isNaN(b[0])&&!/^_/.test(b[0])){var i=b.slice(),l=GLM.$subarray;do(function(a,b,c){"quat"===b&&(b="vec"+c);var d=GLM[b];j(a,{enumerable:!1,get:function(){return new d(l(this.elements,0*
c,1*c))},set:function(a){return(new d(l(this.elements,0*c,1*c)))["="](a)}})})(i.join(""),a.prototype.$type.replace(/[1-9]$/,i.length),i.length);while(i[1]!=i.pop());if(d)return a.$properties;i=b.slice();if(b={xyz:{yz:1},xyzw:{yzw:1,yz:1,zw:2}}[i.join("")])for(var m in b)(function(a,b,c,d){j(a,{enumerable:!1,get:function(){return new GLM[b](GLM.$subarray(this.elements,0*c+d,1*c+d))},set:function(a){return(new GLM[b](GLM.$subarray(this.elements,0*c+d,1*c+d)))["="](a)}})})(m,a.prototype.$type.replace(/[1-9]$/,
m.length),m.length,b[m])}return a.$properties};a(GLM.vec2,GLM.vec2.$.components[0],!0);a(GLM.vec2,GLM.vec2.$.components[1]);a(GLM.vec3,GLM.vec3.$.components[0],!0);a(GLM.vec3,GLM.vec3.$.components[1]);a(GLM.vec3,GLM.vec3.$.components[2]);a(GLM.vec4,GLM.vec4.$.components[0],!0);a(GLM.vec4,GLM.vec4.$.components[1]);a(GLM.vec4,GLM.vec4.$.components[2]);a(GLM.quat,GLM.quat.$.components[0],!0,"noswizzles");a(GLM.quat,GLM.quat.$.components[1]);GLM.quat.$properties.def("wxyz",{enumerable:!1,get:function(){return new GLM.vec4(this.w,
this.x,this.y,this.z)},set:function(a){a=GLM.vec4(a);return this["="](GLM.quat(a.x,a.y,a.z,a.w))}});"uvec2 uvec3 uvec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4".split(" ").forEach(function(b){a(GLM[b],GLM[b].$.components[0],!0);a(GLM[b],GLM[b].$.components[1])});Object.defineProperty(GLM.quat.prototype,"_x",{get:function(){throw Error("erroneous quat._x access");}});var b={2:{yx:{enumerable:!1,get:function(){return new GLM.vec2(this.y,this.x)},set:function(a){a=GLM.vec2(a);this.y=a[0];this.x=a[1]}}},3:{xz:{enumerable:!1,
get:function(){return new GLM.vec2(this.x,this.z)},set:function(a){a=GLM.vec2(a);this.x=a[0];this.z=a[1]}},zx:{enumerable:!1,get:function(){return new GLM.vec2(this.z,this.x)},set:function(a){a=GLM.vec2(a);this.z=a[0];this.x=a[1]}},xzy:{enumerable:!1,get:function(){return new GLM.vec3(this.x,this.z,this.y)},set:function(a){a=GLM.vec3(a);this.x=a[0];this.z=a[1];this.y=a[2]}}},4:{xw:{enumerable:!1,get:function(){return new GLM.vec2(this.x,this.w)},set:function(a){a=GLM.vec2(a);this.x=a[0];this.w=a[1]}},
wz:{enumerable:!1,get:function(){return new GLM.vec2(this.w,this.z)},set:function(a){a=GLM.vec2(a);this.w=a[0];this.z=a[1]}},wxz:{enumerable:!1,get:function(){return new GLM.vec3(this.w,this.x,this.z)},set:function(a){a=GLM.vec3(a);this.w=a[0];this.x=a[1];this.z=a[2];return this}},xyw:{enumerable:!1,get:function(){return new GLM.vec3(this.x,this.y,this.w)},set:function(a){a=GLM.vec3(a);this.x=a[0];this.y=a[1];this.w=a[2];return this}},xzw:{enumerable:!1,get:function(){return new GLM.vec3(this.x,this.z,
this.w)},set:function(a){a=GLM.vec3(a);this.x=a[0];this.z=a[1];this.w=a[2]}},wxyz:{enumerable:!1,get:function(){return new GLM.vec4(this.w,this.x,this.y,this.z)},set:function(a){a=GLM.vec4(a);this.w=a[0];this.x=a[1];this.y=a[2];this.z=a[3];return this}}}},c;for(c in b)for(var d in b[c])2>=c&&GLM.vec2.$properties.def(d,b[c][d]),3>=c&&GLM.vec3.$properties.def(d,b[c][d]),4>=c&&GLM.vec4.$properties.def(d,b[c][d]);GLM.$partition=function(a,b,c,d){if(void 0===c)throw new GLM.GLMJSError("nrows is undefined");
var i=b.$.identity.length;c=c||i;for(var j=function(a){3<GLM.$DEBUG&&GLM.$outer.console.debug("CACHEDBG: "+a)},k=0;k<c;k++)(function(c){var g=d&&d+c,k=c*i;Object.defineProperty(a,c,{configurable:!0,enumerable:!0,set:function(d){if(d instanceof b)this.elements.set(d.elements,k);else if(d&&d.length===i)this.elements.set(d,k);else throw new GLM.GLMJSError("unsupported argtype to "+(a&&a.$type)+"["+c+"] setter: "+[typeof d,d]);},get:function(){if(d){if(this[g])return c||j("cache hit "+g),this[g];c||j("cache miss "+
g)}var a,e=new b(a=GLM.$subarray(this.elements,k,k+i));if(e.elements!==a)throw new GLM.GLMJSError("v.elements !== t "+[GLM.$subarray,e.elements.constructor===a.constructor,e.elements.buffer===a.buffer]);d&&Object.defineProperty(this,g,{configurable:!0,enumerable:!1,value:e});return e}})})(k)};GLM.$partition(GLM.mat4.prototype,GLM.vec4,4,"_cache_");GLM.$partition(GLM.mat3.prototype,GLM.vec3,3,"_cache_")})();
GLM.$dumpTypes=function(a){GLM.$types.forEach(function(b){GLM[b].componentLength&&a("GLM."+b,JSON.stringify({"#type":GLM[b].prototype.$type_name,"#floats":GLM[b].componentLength,"#bytes":GLM[b].BYTES_PER_ELEMENT}))})};
GLM.$init=function(a){a.prefix&&(GLMJS_PREFIX=a.prefix);GLM.$prefix=GLMJS_PREFIX;var b=a.log||function(){};try{b("GLM-js: ENV: "+_ENV._VERSION)}catch(c){}b("GLM-JS: initializing: "+JSON.stringify(a,0,2));b(JSON.stringify({functions:Object.keys(GLM.$outer.functions)}));var d=GLM.mat4,e=GLM.$outer;GLM.toMat4=function(a){return new d(e.mat4_array_from_quat(a))};GLM.$template.extend(GLM.rotation.$template,{$quat:GLM.quat,$dot:GLM.dot.link("vec3,vec3"),$epsilon:GLM.epsilon(),$m:GLM.mat3(),$pi:GLM.pi(),
$length2:GLM.length2.link("vec3"),$cross:GLM.cross.link("vec3,vec3"),$normalize:GLM.normalize.link("vec3"),$angleAxis:GLM.angleAxis.link("float,vec3"),$sqrt:GLM.sqrt});GLM.$symbols=[];for(var f in GLM)"function"===typeof GLM[f]&&/^[a-z]/.test(f)&&GLM.$symbols.push(f);GLM.$types.forEach(function(a){var b=GLM[a].prototype.$type,c;for(c in GLM.$outer.functions){var d=GLM.$outer.functions[c];d.$op&&(GLM.$DEBUG&&GLM.$outer.console.debug("mapping operator<"+b+"> "+c+" / "+d.$op),GLM[a].prototype[c]=d,GLM[a].prototype[d.$op]=
d)}});b("GLM-JS: "+GLM.version+" emulating GLM_VERSION="+GLM.GLM_VERSION+" vendor_name="+a.vendor_name+" vendor_version="+a.vendor_version);glm.vendor=a};
GLM.using_namespace=function(a){GLM.$DEBUG&&GLM.$outer.console.debug("GLM.using_namespace munges globals; it should probably not be used!");GLM.using_namespace.$tmp={ret:void 0,tpl:a,names:GLM.$symbols,saved:{},evals:[],restore:[],before:[],after:[]};eval(GLM.using_namespace.$tmp.names.map(function(a,c){return"GLM.using_namespace.$tmp.saved['"+a+"'] = GLM.using_namespace.$tmp.before["+c+"] = 'undefined' !== typeof "+a+";"}).join("\n"));GLM.$DEBUG&&console.warn("GLM.using_namespace before #globals: "+
GLM.using_namespace.$tmp.before.length);GLM.using_namespace.$tmp.names.map(function(a){GLM.using_namespace.$tmp.restore.push(a+"=GLM.using_namespace.$tmp.saved['"+a+"'];"+("GLM.using_namespace.$tmp.saved['"+a+"']=undefined;delete GLM.using_namespace.$tmp.saved['"+a+"'];"));GLM.using_namespace.$tmp.evals.push(a+"=GLM."+a+";")});eval(GLM.using_namespace.$tmp.evals.join("\n"));GLM.using_namespace.$tmp.ret=a();eval(GLM.using_namespace.$tmp.restore.join("\n"));eval(GLM.using_namespace.$tmp.names.map(function(a,
c){return"GLM.using_namespace.$tmp.after["+c+"] = 'undefined' !== typeof "+a+";"}).join("\n"));GLM.$DEBUG&&console.warn("GLM.using_namespace after #globals: "+GLM.using_namespace.$tmp.after.length);a=GLM.using_namespace.$tmp.ret;delete GLM.using_namespace.$tmp;return a};
function $GLM_extern(a,b){b=b||a;return function(){GLM[b]=GLM.$outer.functions[a]||GLM.$outer[a];if(!GLM[b])throw new GLM.GLMJSError("$GLM_extern: unresolved external symbol: "+a);GLM.$DEBUG&&GLM.$outer.console.debug("$GLM_extern: resolved external symbol "+a+" "+typeof GLM[b]);return GLM[b].apply(this,arguments)}}
function GLM_polyfills(){var a={};"bind"in Function.prototype||(a.bind=Function.prototype.bind=function(a){function c(){}if("function"!==typeof this)throw new TypeError("not callable");var d=[].slice,e=d.call(arguments,1),f=this,g=function(){return f.apply(this instanceof c?this:a||global,e.concat(d.call(arguments)))};c.prototype=this.prototype||c.prototype;g.prototype=new c;return g});return a}
$GLM_reset_logging.current=function(){return{$GLM_log:"undefined"!==typeof $GLM_log&&$GLM_log,$GLM_console_log:"undefined"!==typeof $GLM_console_log&&$GLM_console_log,$GLM_console_prefixed:"undefined"!==typeof $GLM_console_prefixed&&$GLM_console_prefixed,console:GLM.$outer.console}};
function $GLM_reset_logging(a){a&&"object"===typeof a&&($GLM_log=a.$GLM_log,$GLM_console_log=a.$GLM_console_log,$GLM_console_factory=a.$GLM_console_factory,GLM.$outer.console=a.console,a=!1);if(a||"undefined"===typeof $GLM_log)$GLM_log=function(a,b){GLM.$outer.console.log.apply(GLM.$outer.console,[].slice.call(arguments).map(function(a){var b=typeof a;return"xboolean"===b||"string"===b?a+"":GLM.$isGLMObject(a)||!isNaN(a)?GLM.to_string(a):a+""}))};if(a||"undefined"===typeof $GLM_console_log)$GLM_console_log=
function(a,b){(console[a]||function(){}).apply(console,[].slice.call(arguments,1))};if(a||"undefined"===typeof $GLM_console_factory)$GLM_console_factory=function(a){return $GLM_console_log.bind($GLM_console_log,a)};var b=$GLM_console_factory,c={};"debug,warn,info,error,log,write".replace(/\w+/g,function(a){c[a]=b(a)});"object"===typeof GLM&&(GLM.$outer&&(GLM.$outer.console=c),GLM.$log=$GLM_log);return c}try{window.$GLM_reset_logging=this.$GLM_reset_logging=$GLM_reset_logging}catch(e$$19){}
GLM.$reset_logging=$GLM_reset_logging;GLM.$log=GLM.$log||$GLM_log;function $GLM_GLMJSError(a,b){function c(c){this.name=a;this.stack=Error().stack;Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor);this.message=c;b&&b.apply(this,arguments)}c.prototype=Error();c.prototype.name=a;return c.prototype.constructor=c}tdl.fast.exists;glm=GLM;
var DLL={vendor_name:"tdl-fast.js",vendor_version:"2009?",_name:"glm.tdl-fast.js",_version:"0.0.2",prefix:"glm-js[tdl-fast]: ",statics:{mat4_perspective:function(a,b,c,d){return glm.mat4(tdl.fast.matrix4.perspective(new Float32Array(16),a,b,c,d))},_FIXME_mat4_ortho:function(a,b,c,d,e,f){return new glm.mat4(tdl.fast.matrix4.ortho(new Float32Array(16),a,b,c,d,e||-1,f||1))},mat4_ortho:function(a,b,c,d,e,f){e=e||-1;f=f||1;var g=new glm.mat4(0),h=g.elements;h[0]=2/(b-a);h[5]=2/(d-c);h[10]=-2/(f-e);h[12]=
(b+a)/(a-b);h[13]=(d+c)/(c-d);h[14]=(f+e)/(e-f);h[15]=1;return g},mat4_angleAxis:function(a,b){return glm.mat4(tdl.fast.matrix4.axisRotation(new Float32Array(16),b.elements,a))},quat_angleAxis:function(a,b){var c=tdl.quaternions.axisRotation(b.elements,a);return new glm.quat(c)},mat4_translation:function(a){return glm.mat4(tdl.fast.matrix4.translation(new Float32Array(16),a.elements))},mat4_scale:function(a){return glm.mat4(tdl.fast.matrix4.scaling(new Float32Array(16),a.elements))},mat4_array_from_quat:function(a){return tdl.quaternions.quaternionToRotation(a.elements)},
quat_array_from_mat4:function(a){a=tdl.quaternions.rotationToQuaternion(a.elements);return isNaN(a[0])?glm.quat.$.identity:a}}};
DLL["declare<T,V,...>"]={mul:{$op:"*",_mulQuatQuat:tdl.quaternions.mulQuaternionQuaternion,"quat,quat":function(a,b){return new glm.quat(this._mulQuatQuat(a.elements,b.elements))},"quat,vec<N>":function(a,b){return this["mat4,vecN"](glm.toMat4(a),b)},"vec<N>,quat":function(a,b){return this["quat,vecN"](glm.inverse(b),a)},_mulVecSca:tdl.fast.mulVectorScalar,"vec<N>,float":function(a,b){return glm.vecN(this._mulVecSca(new Float32Array(N),a.elements,b))},"quat,float":function(a,b){return new a.constructor(this["vec4,float"](a,
b).elements)},"mat4,vec3":function(a,b){b=new glm.vec4(b,1);var c=this["mat4,vec4"](a,b);return new glm.vec3(c)},_mulVecMat4:tdl.fast.rowMajor.mulVectorMatrix4,"mat4,vec4":function(a,b){return glm.vec4(this._mulVecMat4(new Float32Array(4),b.elements,a.elements))},"vec4,mat4":function(a,b){return this["mat4,vec4"](glm.inverse(b),a)},"_mulMatMat<N>":"tdl.fast.columnMajor.mulMatrixMatrixN","mat<N>,mat<N>":function(a,b){return glm.matN(this._mulMatMatN(new Float32Array(N*N),a.elements,b.elements))}},
mul_eq:{$op:"*=","vec<N>,float":function(a,b){tdl.fast.mulVectorScalar(a.elements,a.elements,b);return a},"_mulMatMat<N>":"tdl.fast.columnMajor.mulMatrixMatrixN","mat<N>,mat<N>":function(a,b){this._mulMatMatN(a.elements,a.elements,b.elements);return a},_mulQuatQuat:tdl.quaternions.mulQuaternionQuaternion,"quat,quat":function(a,b){a.elements.set(this._mulQuatQuat(a.elements,b.elements));return a},_mulVecMat4:tdl.fast.rowMajor.mulVectorMatrix4,"inplace:vec3,quat":function(a,b){var c=glm.toMat4(glm.inverse(b)).elements,
d=glm.vec4(a,1).elements;this._mulVecMat4(a.elements,d,c);return a},"inplace:vec4,mat4":function(a,b){var c=glm.inverse(b);this._mulVecMat4(a.elements,new Float32Array(a.elements),c.elements);return a}},cross:{_cross:tdl.fast.cross,"vec3,vec3":function(a,b){return new glm.vec3(this._cross(new Float32Array(3),a,b))}},dot:{_dot:tdl.fast.dot,"vec3,vec3":function(a,b){return this._dot(a,b)},_slowdot:tdl.math.dot,"vec4,vec4":function(a,b){return this._slowdot(a,b)}},lookAt:{_lookAt:tdl.fast.matrix4.lookAt,
"vec3,vec3":function(a,b,c){return new glm.mat4(this._lookAt(new Float32Array(16),a.elements,b.elements,c.elements))}}};
DLL["declare<T,V,number>"]={mix:{"quat,quat":function(a,b,c){a=a.elements;b=b.elements;var d=glm.quat(new Float32Array(4)),e=d.elements,f=a[0],g=a[1],h=a[2],i=a[3],j=b[0],k=b[1],l=b[2];b=b[3];var m=f*j+g*k+h*l+i*b,q;if(1<=Math.abs(m))return e!==a&&(e[0]=f,e[1]=g,e[2]=h,e[3]=i),d;a=Math.acos(m);q=Math.sqrt(1-m*m);m=Math.sin((1-c)*a)/q;c=Math.sin(c*a)/q;e[0]=f*m+j*c;e[1]=g*m+k*c;e[2]=h*m+l*c;e[3]=i*m+b*c;return d}}};DLL["declare<T,V,number>"].slerp=DLL["declare<T,V,number>"].mix;
DLL["declare<T>"]={normalize:{"vec<N>":function(a){return glm.vecN(tdl.fast.normalize(new Float32Array(N),a.elements))},quat:function(a){return new glm.quat(tdl.quaternions.normalize(a.elements))}},length:{"vec<N>":function(a){return tdl.math.length(a.elements)},quat:function(a){return tdl.quaternions.length(a.elements)}},length2:{"vec<N>":function(a){return tdl.math.lengthSquared(a.elements)},quat:function(a){return tdl.quaternions.lengthSquared(a.elements)}},inverse:{quat:function(a){return new glm.quat(tdl.quaternions.inverse(a.elements))},
mat4:function(a){a=a.clone();if(isNaN(tdl.fast.inverse4(a.elements,a.elements)[0]))a["="](glm.mat4());return a}},transpose:{mat4:function(a){a=a.clone();tdl.fast.transpose4(a.elements,a.elements);return a}}};glm.$outer.$import(DLL);try{module.exports=glm}catch(e$$20){};
return glm; })(this);
